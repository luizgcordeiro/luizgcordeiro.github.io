<!DOCTYPE html>
<!-------------------------------------------------------
The beggining should be equal for all files
--------------------------------------------------------->
<html>
<head>

	<title>Soficity and other dynamical aspects of groupoids and inverse semigroups</title>

	<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>  
	<script type="text/x-mathjax-config">
		MathJax.Hub.Config({
			extensions: ["tex2jax.js"],
			jax: ['input/TeX','output/HTML-CSS'],
			tex2jax: {
				inlineMath: [['$','$'], ['\\(','\\)']]
				},
			TeX: {extensions: ['xypic.js','AMSmath.js', 'AMSsymbols.js', 'AMScd.js', ]}
		});
	</script>
	
	<script type="text/javascript" src="../../mathjax/MathJax.js?config=default"></script>

	<script type="text/javascript">
	   function toggle_visibility(id) {
		   var e = document.getElementById(id);
		   if(e.style.display == 'block')
			  e.style.display = 'none';
		   else
			  e.style.display = 'block';
	   }
	</script>

	<link rel="stylesheet" type="text/css" href="../src/style.css">

	<title>
		Soficity and other dynamical aspects of groupoids and inverse semigroups
	</title>
</head>
<body>

<div style="display: none" id="latexcommands" style=""></div>
<script>
$( "#latexcommands" ).load( "../src/latexcommands" );
	</script>

<div id="sidebar" class="sidebar"></div>

<script>
$( "#sidebar" ).load( "../src/sidebar" );
</script>

<!-------------------------------------------------------
RIGHT BAR
-------------------------------------------------------->

<div class="fullrightbar">
<div id="closerightbar" style='margin-bottom:1em;display:none;'>
	[<a href='javascript:void(0)' onclick='closerightbar()'>Close</a>]
</div>
<div id='rightbar'></div>
</div>

<!-------------------------------------------------------
MAIN
-------------------------------------------------------->

<div class="main">

<h2 class='section'>Steinberg algebras</h2>

<h3 class='subsection'>4.4.1. Definitions and notation</h3>

<p>
Steinberg algebras were independently introduced in <span class='ref' data-tag='MR2565546'></span> and <span class='ref' data-tag='MR3274831'></span>, as algebraic analogues of groupoid $C^*$-algebras, and are generalizations of Leavitt path algebras and universal inverse semigroup algebras. We refer to [<span class='ref' data-tag='MR3743184'></span>] and [<span class='ref' data-tag='MR3848066'></span>] for more details.
</p>

<p>
In this section, $R$ is a fixed commutative ring with unit. Given an ample Hausdorff groupoid $\mathcal{G}$, we denote by $R^{\mathcal{G}}$ the $R$-module of $R$-valued functions on $\mathcal{G}$. Given $A\subseteq\mathcal{G}$, we define $1_A$ as the characteristic function of $A$ (with values in $R$).
</p>

<!-- 4.4.1 -->
<div class='definition'>
	<p><span class='envidentifier'>Definition 4.4.1
	<span style='font-weight:normal;'>([<span class='ref' data-tag='MR2565546'></span>, Definition 4.1])</span></span>
	Given an ample Hausdorff groupoid $\mathcal{G}$, $A_R(\mathcal{G})$ is the $R$-submodule of $R^{\mathcal{G}}$ generated by the characteristic functions of compact-open bisections of $\mathcal{G}$.
	</p>
</div>

<p>
The <em>support</em> of $f\in R^{\mathcal{G}}$ is defined as $\supp(f)=\overline{\left\{a\in\mathcal{G}:f(a)\neq 0\right\}}$.
</p>

<!-- 4.4.2 -->
<div class='proposition' id='proposition442'>
	<p><span class='envidentifier'>Proposition 4.4.2
	<span style='font-weight:normal;'>([<span class='ref' data-tag='MR3274831'></span>, Lemma 3.3])</span></span>
	If $\mathcal{G}$ is an ample Hausdorff groupoid, then $A_R(\mathcal{G})$ coincides with the $R$-module of locally constant compactly supported $R$-valued functions on $\mathcal{G}$. Every $f\in A_R(\mathcal{G})$ can be written as a finite linear combination
	<div class='equation'>\begin{align*}
		f&=\sum_{i=1}^n r_i1_{A_i},
	\end{align*}</div>
	where $r_i\in R$ and $\left\{A_i:i=1,\ldots,n\right\}$ is a family of pairwise disjoint compact-open bisections of $\mathcal{G}$, and $\supp(f)=\left\{a\in G:f(a)\neq 0\right\}$.
	</p>
</div>

<p>
Recall that $\KB(\mathcal{G})$ is the semigroup of compact-open bisections of $\mathcal{G}$ (Definition <span class='ref' data-tag='definitionkbg'></span>).
</p>

<p>
<a class='proofbutton' data-tag='proposition442'>Proof</a> of Proposition <span class='ref' data-tag='proposition442'></span>
</p>

<div class='proof' id='proofofproposition442'>
	<p>
	Since $\mathcal{G}$ is Hausdorff, then compact-open bisections are clopen and their characteristic functions are locally constant. The same is true of their linear combinations.
	</p>
	
	<p>
	Conversely, if $f$ is a locally constant, compactly supported function on $\mathcal{G}$, $f^{-1}(0)$ is clopen, hence $\supp(f)=\overline{\mathcal{G}\setminus f^{-1}(0)}=\mathcal{G}\setminus f^{-1}(0)$ is clopen as well.
	</p>
	
	<p>
	Using compactness of $\supp(f)$, and since $\KB(\mathcal{G})$ is a basis for the topology of $\mathcal{G}$, we can find $A_1,\ldots,A_n\in\KB(\mathcal{G})$ and $r_1,\ldots,r_n$ such that $\supp(f)=\bigcup_{i=1}^n A_i$ and $f=r_i$ on $A_i$. Substituting $A_j$ by $A_j\setminus\bigcup_{i=1}^{j-1}A_i$ for all $j\geq 2$, if necessary, the family $\left\{A_i:i=1,\ldots,n\right\}$ forms a partition of $\supp(f)$, and the equality
	<div class='equation'>\begin{align*}
		f
		&=\sum_{i=1}^n r_i1_{A_i}
	\end{align*}</div>
	holds. In particular, $f$ is a linear combination of characteristic functions of compact-open bisections, and therefore $f\in A_R(\mathcal{G})$.<span class='qed'></span>
	</p>
</div>

<!-- 4.4.3 -->
<div class='remark'>
	<p><span class='envidentifier'>Remark 4.4.3</span>
	Endowing $R$ with the discrete topology, $A_R(\mathcal{G})$ coincides with the set of compactly supported functions from $\mathcal{G}$ to $R$.
	</p>
</div>

<p>
For every $f\in A_R(\mathcal{G})$ ($\mathcal{G}$ ample and Hausdorff) and every $x\in\mathcal{G}^{(0)}$, $\supp(f)\cap\mathcal{G}_x$ is compact in the discrete space $\mathcal{G}_x$, and hence finite. Similarly, $\supp(f)\cap\mathcal{G}^x$ is finite, and so we can define the <em>convolution product</em> on $A_R(\mathcal{G})$, by setting, for all $f,g\in A_R(\mathcal{G})$ and all $a\in\mathcal{G}$,
<div class='equation' id='equationconvolutionproductsteinbergalgebra'>\begin{align*}
	(fg)(a)
		&=\sum_{xy=a}f(x)g(y)\\
		&=\sum_{c\in\mathcal{G}^{\ra(a)}}f(c)g(c^{-1}a)\\
		&=\sum_{d\in\mathcal{G}_{\so(a)}}f(ad^{-1})g(d),\tag{4.4.1}
\end{align*}</div>
since both sums above have only a finite number of nonzero terms.
</p>

<p>
With this product, $A_R(\mathcal{G})$ is made into an associative algebra.
</p>

<!-- 4.4.4 -->
<div class='definition'>
	<p><span class='envidentifier'>Definition 4.4.4
	<span style='font-weight:normal;'>([<span class='ref' data-tag='MR2565546'></span>, <span class='ref' data-tag='MR3274831'></span>])</span></span>
	The $R$-module $A_R(\mathcal{G})$, endowed with the convolution product of Equation (<span class='ref' data-tag='equationconvolutionproductsteinbergalgebra'></span>) is called the <em>Steinberg algebra</em> of $\mathcal{G}$ with coefficients in $R$.
	</p>
</div>

<p>
From the convolution formula we obtain, for all $f,g\in A_R(\mathcal{G})$,
<div class='equation'>\begin{align*}
	\supp(fg)
		&\subseteq\left\{ab:(a,b)\in(\supp(f)\times\supp(g))\cap\mathcal{G}^{(2)}\right\}=\supp(f)\supp(g).
\end{align*}</div>
</p>

<p>
We will now prove a universal property for Steinberg algebras, and for this we need the notion of a <em>Boolean representation</em>. These are the semigroup morphisms of a Boolean inverse semigroup $S$ into the multiplicative semigroup of an algebra $B$ which respect the order structure of $S$. Recall that a distributive inverse semigroup $S$ is <em>Boolean</em> if it is a $\wedge$-semilattice under the natural order and $E(S)$ is a generalized Boolean algebra.
</p>

<!-- 4.4.5 -->
<div class='definition' id='definitionbooleanrepresentation'>
	<p><span class='envidentifier'>Definition 4.4.5
	<span style='font-weight:normal;'>([<span class='ref' data-tag='MR3274831'></span>, Definition 3.9])</span></span>
	A <em>Boolean representation</em> of a Boolean inverse semigroup $S$ on an algebra $B$ is a semigroup morphism $\pi:S\to B$ from $S$ to the multiplicative semigroup of $B$ which satisfies
	<div class='equation'>\begin{align*}
		\pi(s\lor t)
			&=\pi(s)+\pi(t)
	\end{align*}</div>
	whenever $s$ and $t$ are compatible and $s\land t=0$.
	</p>
</div>

<!-- 4.4.6 -->
<div class='example'>
	<p><span class='envidentifier'>Example 4.4.6</span>
	If $\mathcal{G}$ is an ample Hausdorff groupoid, then the map $\KB(\mathcal{G})\to A_R(\mathcal{G})$, $U\mapsto 1_U$, is a Boolean representation of $\KB(\mathcal{G})$.
	</p>
</div>

<p>
This notion of Boolean representation coincides with [<span class='ref' data-tag='MR3548134'></span>, Definition 3.1] - except for the fact that we do not assume that the codomain algebra is involutive - as we prove below:
</p>

<!-- 4.4.7 -->
<div class='proposition' id='proposition447'>
	<p><span class='envidentifier'>Proposition 4.4.7</span>
	A semigroup morphism $\pi:S\to B$ from a Boolean inverse semigroup $S$ to the multiplicative semigroup of an algebra $B$ is a Boolean representation if and only if
	<ol class='roman'>
		<li>
		$\pi(0)=0$;
		</li>
		
		<li>
		$\pi(s\lor t)=\pi(s)+\pi(t)-\pi(s\land t)$ whenever $s,t\in S$ are compatible.
		</li>
	</ol>
	(Recall from <span class='ref' data-tag='propositioncompatibility'></span>(c) that if $s$ and $t$ are compatible in $S$ then $s\land t=st^*t$.)
	</p>
</div>

<p>
<a class='proofbutton' data-tag='proposition447'>Proof</a>
</p>

<div class='proof' id='proofofproposition447'>
	<p>
	Of course, if $\pi$ satisfies (i) and (ii) then $\pi$ is a Boolean representation, so we prove the converse direction.
	</p>
	
	<p>
	Assume that $\pi$ is a Boolean representation. Then
	<div class='equation'>\begin{align*}
		\pi(0)
			&=\pi(0\lor 0)=\pi(0)+\pi(0),
	\end{align*}</div>
	so $\pi(0)=0$. If $s,t\in S$ are compatible, then $s\land(t\setminus s)=0$, so
	<div class='equation'>\begin{align*}
		\pi(s\lor t)
			&=\pi(s\lor(t\setminus s))=\pi(s)+\pi(t\setminus s).
	\end{align*}</div>
	But since $t=(t\land s)\lor(t\setminus s)$, then
	<div class='equation'>\begin{align*}
		\pi(t)
			&=\pi(s\land t)+\pi(t\setminus s),
	\end{align*}</div>
	and Property (ii) follows.<span class='qed'></span>
	</p>
</div>

<p>
Now we describe the universal property of $A_R(\mathcal{G})$, which was given in the case of complex algebras in [<span class='ref' data-tag='MR3274831'></span>, Theorem 3.10]. Essentially the same proof works in the case of a general commutative unital ring $R$.
</p>

<!-- 4.4.8 -->
<div class='theorem' id='theoremuniversalpropertysteinberg'>
	<p><span class='envidentifier'>Theorem 4.4.8</span>
	Let $R$ be a commutative ring with unit, and $\mathcal{G}$ be an ample Hausdorff groupoid. Then $A_R(\mathcal{G})$ is universal for Boolean representations of $\KB(\mathcal{G})$, i.e., if $\pi:\KB(\mathcal{G})\to B$ is a Boolean representation of $\KB(\mathcal{G})$ in an $R$-algebra $B$, then there exists a unique $R$-algebra morphism $\Phi:A_R(\mathcal{G})\to B$ such that $\Phi(1_U)=\pi(U)$ for all $U\in\KB(\mathcal{G})$.
	</p>
</div>

<p>
<a class='proofbutton' data-tag='theoremuniversalpropertysteinberg'>Proof</a>
</p>

<div class='proof' id='proofoftheoremuniversalpropertysteinberg'>
	<p>
	Uniqueness of such $\Phi$ is immediate as $A_R(\mathcal{G})$ is generated by the family $\left\{1_U:U\in\KB(\mathcal{G})\right\}$. Given $f\in A_R(\mathcal{G})$, write $f$ as a linear combination $f=\sum_{i=1}^n r_i1_{U_i}$ for certain $r_i\in R$ and a pairwise disjoint collection of compact-open bisections $U_i\in\KB(\mathcal{G})$. Define $\Phi: A_R(\mathcal{G})\to B$ by
	<div class='equation'>\begin{align*}
		\Phi(f)\\
		&=\Phi\left(\sum_{i=1}^n r_i1_{U_i}\right)\\
		&=\sum_{i=1}^n r_i\pi(U_i).
	\end{align*}</div>
	We first need to prove that $\Phi$ does not depend on the choice of $r_i$ and $U_i$.
	</p>
	
	<p>
	Suppose that $\sum_{i=1}^n r_i1_{U_i}=\sum_{j=1}^m s_j1_{V_j}$, where $s_j\in R$ and $\left\{V_j\right\}_j$ is a pairwise disjoint collection in $\KB(\mathcal{G})$. Then $\sum_{i,j}r_i1_{U_i\cap V_j}=f=\sum_{i,j}s_j 1_{U_i\cap V_j}$. First of all, let us prove that for all pair of indices $i,j$, we have
	<div class='equation' id='equationuniversalpropertyofbooleanrepresentationsforarg'>\begin{align*}
		r_i\pi(U_i\cap V_j)
			&=s_j\pi(U_i\cap V_j)\tag{4.4.2}.
	\end{align*}</div>
	There are two possibilities:
	<ul>
		<li><p><u>Case 1</u>: $U_i\cap V_j=\varnothing$.</p>
		
			<p>
			Then $\pi(U_i\cap V_j)=0$ so Equation (<span class='ref' data-tag='equationuniversalpropertyofbooleanrepresentationsforarg'></span>) is trivially valid.
			</p>
		</li>
		
		<li>
			<p><u>Case 2</u>: $U_i\cap V_j\neq\varnothing$.</p>
			
			<p>
			In this case, choose $a\in U_i\cap V_j$. Then $r_i=f(a)=s_j$, so of course $r_i\pi(U_i\cap V_j)=s_j\pi(U_i\cap V_j)$.
			</p>
		</li>
	</ul>
	</p>
	
	<p>
	We can partition each $U_i$ as $U_i=\bigcup_j (U_i\cap V_j)$, and similarly we can partition each $V_j$ as $V_j=\bigcup_i (U_i\cap V_j)$, so using Equation (<span class='ref' data-tag='equationuniversalpropertyofbooleanrepresentationsforarg'></span>) and the properties of Boolean representations, we conclude that
	<div class='equation'>\begin{align*}
		\sum_{i=1}^n r_i\pi(U_i)
		&=\sum_{i=1}^n\sum_{j=1}^m r_i\pi(U_i\cap V_j)\\
		&==\sum_{j=1}^m\sum_{i=1}^n s_j\pi(U_i\cap V_j)\\
		&=\sum_{j=1}^m s_j\pi(V_j).
	\end{align*}</div>
	Therefore, $\Phi$ is well-defined.
	</p>
	
	<p>
	In order to prove that $\Phi$ is an $R$-module morphism, we apply an argument similar to the one above: If $f,g\in A_R(\mathcal{G})$ have representations $f=\sum_{i=1}^n r_i 1_{A_i}$ and $g=\sum_{j=1}^m s_j 1_{B_j}$ as above, we can, if necessary, add terms of the form $0\cdot 1_{B_j\setminus\supp(f)}$ to the representation of $f$, and similarly for $g$, and assume that $\bigcup_{i=1}^n A_i=\bigcup_{j=1}^m B_j$. Therefore we may rewrite, for all $\lambda\in R$,
	<div class='equation'>\begin{align*}
		f
			&=\sum_{i,j}r_i1_{A_i\cap B_j},\\
		g
			&=\sum_{i,j}s_j1_{A_i\cap B_j},\qquad\text{and}
		(f+\lambda g)
			&=\sum_{i,j}(r_i+\lambda s_j)1_{A_i\cap B_j},
	\end{align*}</div>
	and the definition of $\Phi$ readily implies $\Phi(f+\lambda g)=\Phi(f)+\lambda\Phi(g)$, so $\Phi$ is an $R$-module morphism. If $U,V\in\KB(\mathcal{G})$, then
	<div class='equation'>\begin{align*}
		\Phi(1_U1_V)
			&=\Phi(1_{UV})\\
			&=\pi(UV)\\
			&=\pi(U)\pi(V)\\
			&=\Phi(1_U)\Phi(1_V),
	\end{align*}</div>
	and since $\left\{1_U:U\in\KB(\mathcal{G})\right\}$ generates $A_R(\mathcal{G})$ as an $R$-module, then $\Phi$ is an algebra morphism.<span class='qed'></span>
	</p>
</div>

<!-- 4.4.9 -->
<div class='definition' id='definitiondiagonalsteinbergalgebra'>
	<p><span class='envidentifier'>Definition 4.4.9</span>
	The <em>diagonal subalgebra</em> of $A_R(\mathcal{G})$ is
	<div class='equation'>\begin{align*}
		D_R(\mathcal{G})
			&=\left\{f\in A_R(\mathcal{G}):\supp(f)\subseteq\mathcal{G}^{(0)}\right\}.
	\end{align*}</div>
	</p>
</div>

<p>
Since $\supp(fg)\subseteq\supp(f)\supp(g)$ and $\supp(f+\lambda g)\subseteq\supp(f)\cup\supp(g)$ for all $f,g\in A_R(\mathcal{G})$ and $\lambda\in R$, it follows that $D_R(\mathcal{G})$ is indeed a subalgebra of $A_R(\mathcal{G})$. Moreover, the convolution product on $D_R(\mathcal{G})$ coincides with the pointwise product: for all $f,g\in D_R(\mathcal{G})$ and $x\in\mathcal{G}^{(0)}$, we have $\mathcal{G}^x\cap\mathcal{G}^{(0)}=\left\{x\right\}$, so
<div class='equation'>\begin{align*}
	(fg)(x)
		&=\sum_{a\in\mathcal{G}^x\cap\supp(f)}f(a)g(a^{-1}x)=f(x)g(x^{-1}x)=f(x)g(x).
\end{align*}</div>
In particular, $D_R(\mathcal{G})$ is commutative, since we assume that the ring $R$ is commutative.
</p>

<p>
Moreover, $D_R(\mathcal{G})$ is isomorphic to $A_R(\mathcal{G}^{(0)})$ via the map
<div class='equation'>\begin{align*}
	E\colon D_R(\mathcal{G})\to A_R(\mathcal{G}^{(0)}),&\qquad f\mapsto f|_{\mathcal{G}^{(0)}},
\end{align*}</div>
whose inverse is given as follows: If $f\in A_R(\mathcal{G}^{(0)})$, then $E^{-1}(f)$ is the extension of $f$ to all of $\mathcal{G}$ by setting $E^{-1}(f)=0$ on $\mathcal{G}\setminus\mathcal{G}^{(0)}$.
</p>

<h3 class='subsection'>4.4.2. Diagonal-preserving isomorphisms of Steinberg Algebras</h3>

<p>
The goal of this section is to prove that the Steinberg algebra of an ample Hausdorff groupoid $\mathcal{G}$ together with its diagonal algebra completely characterize $\mathcal{G}$. Although the main theorem of this subsection (Theorem <span class='ref' data-tag='theoremsteinbergalgebras'></span>) is partially stated and proven (for more general <em>graded</em> Steinberg algebras) in [<span class='ref' data-tag='MR3848066'></span>, Corollary 3.14], we can obtain a precise classification of the diagonal-preserving isomorphisms of Steinberg algebras, as described in Theorem <span class='ref' data-tag='theoremsteinbergalgebras'></span> and Corollary <span class='ref' data-tag='corollaryclassificationofautomorphismsofsteinbergalgebras'></span>.
</p>

<p>
We will need to recover the bisections of $\mathcal{G}$ from $A_R(\mathcal{G})$, and in particular the compact-open subsets of $\mathcal{G}^{(0)}$. The main idea is, again, to identify subsets of $\mathcal{G}^{(0)}$ with their characteristic functions, and these are precisely the functions which attain only the values $0$ and $1$. We thus need to assume an extra condition on the ring $R$.
</p>

<!-- 4.4.10 -->
<div class='definition'>
	<p><span class='envidentifier'>Definition 4.4.10
	<span>([<span class='ref' data-tag='MR1878556'></span>, X.7])</span></span>
	A (nontrivial) commutative unital ring $R$ is <em>indecomposable</em> if its only idempotents are $0$ and $1$. Equivalently, $R$ is indecomposable if it cannot be written as a direct sum of rings $R\cong R_1\oplus R_2$, where $R_1$ and $R_2$ are both nontrivial rings.
	</p>
</div>

<p>
A subset $A$ of a groupoid $\mathcal{G}$ is a bisection if and only if $AA^{-1}\cup A^{-1}A\subseteq \mathcal{G}^{(0)}$. A similar kind of condition will be used to recover an ample Hausdorff groupoid $\mathcal{G}$ from the pair $(A_R(\mathcal{G}),D_R(\mathcal{G}))$.
</p>

<!-- 4.4.11 -->
<div class='definition'>
	<p><span class='envidentifier'>Definition 4.4.11</span>
	A <em>normalizer</em> of $D_R(\mathcal{G})$ is an element $f\in A_R(\mathcal{G})$ for which there exists $g\in A_R(\mathcal{G})$ such that
	<ol class='roman'>
		<li>
			$fD_R(\mathcal{G})g\subseteq D_R(\mathcal{G})$ and $gD_R(\mathcal{G})f\subseteq D_R(\mathcal{G})$;
		</li>
		
		<li>
			$fgf=f$ and $gfg=g$.
		</li>
	</ol>
	We denote by $N_R(\mathcal{G})$ the set of normalizers of $D_R(\mathcal{G})$. An element $g$ satisfying (i) and (ii) above will be called an <em>inverse of $f$ relative to $D_R(\mathcal{G})$</em>.
	</p>
</div>

<!-- 4.4.12 -->
<div class='example'>
	<p><span class='envidentifier'>Example 4.4.12</span>
	If $A\in\KB(\mathcal{G})$ then $1_A\in N_R(\mathcal{G})$. More generally, if $\lambda_1,\ldots,\lambda_n$ are invertible elements in $R$ and $U_1,\ldots,U_n$ are compatible disjoint compact-open bisections (that is, $\bigcup_i U_i$ is also a bisection), then $f=\sum_i \lambda_i1_{U_i}$ is a normalizer of $D_R(\mathcal{G})$. The unique inverse of $f$ relative to $D_R(\mathcal{G})$ is given by $f^*=\sum_i\lambda_i^{-1}1_{U_i^{-1}}$, that is, $f^*(a)=f(a^{-1})^{-1}$ for all $a\in\supp(f)^{-1}$.
	</p>
</div>

<p>
In order to recover $\KB(\mathcal{G})$ from the pair $(A_R(\mathcal{G}),D_R(\mathcal{G}))$, we need that all normalizers of $D_R(\mathcal{G})$ have the form described in the example above, so additional conditions will have to be assumed on the groupoids we consider. The next few results show us that $N_R(\mathcal{G})$ encodes some of the semigroup structure of $\KB(\mathcal{G})$.
</p>

<!-- 4.4.13 -->
<div class='lemma' id='lemmanormalizerssteinbergalgebradiagonal1'>
	<p><span class='envidentifier'>Lemma 4.4.13</span>
	Suppose that $f\in N_R(\mathcal{G})$.
	<ol class='alphpar'>
		<li>
		If $g$ is an inverse of $f$ relative to $D_R(\mathcal{G})$, then $fg,gf\in D_R(\mathcal{G})$.
		</li>
		<li>
		The inverse of $f$ relative to $D_R(\mathcal{G})$ is unique.
		</li>
	</ol>
	</p>
</div>

<p>
<a class='proofbutton' data-tag='lemmanormalizerssteinbergalgebradiagonal1'>Proof</a>
</p>

<div class='proof' id='proofoflemmanormalizerssteinbergalgebradiagonal1'>
	<ol class='alphpar'>
		<li>
		We have $fg=f1_{\so(\supp(f))}g\in D_R(\mathcal{G})$ and similarly $gf=g1_{\ra(\supp(f))}f\in D_R(\mathcal{G})$.
		</li>
		
		<li>
		Let $g_1,g_2$ be inverses of $f$ relative to $D_R(\mathcal{G})$. Then
		<div class='equation'>\begin{align*}
			g_1
				&=g_1fg_1\\
				&=g_1(fg_2f)g_1\\
				&=(g_1f)(g_2f)g_1.
		\end{align*}</div>
		But since $g_1f$ and $g_2f\in D_R(\mathcal{G})$, which is a commutative subalgebra, then
		<div class='equation'>\begin{align*}
		g_1
			&=(g_1f)(g_2f)g_1\\
			&=(g_2f)(g_1f)g_1\\
			&=g_2fg_1\\
			&=g_2(fg_2f)g_1\\
			&=g_2(fg_2)(fg_1),
		\end{align*}</div>
		and similarly, since $fg_2,fg_1\in D_R(\mathcal{G})$,
		<div class='equation'>\begin{align*}
		g_1
			&=g_2(fg_2)(fg_1)\\
			&=g_2(fg_1)fg_2\\
			&=g_2(fg_1f)g_2\\
			&=g_2fg_2\\
			&=g_2.
		\end{align*}<span class='qed'></span></div>
		</li>
	</ol>
</div>

<!-- 4.4.14 -->
<div class='definition'>
	<p><span class='envidentifier'>Definition 4.4.14</span>
	We denote the inverse of $f\in N_R(\mathcal{G})$ relative to $D_R(\mathcal{G})$ by $f^*$.
	</p>
</div>

<!-- 4.4.15 -->
<div class='proposition' id='propositionNRGisinversesemigroup'>
	<p><span class='envidentifier'>Proposition 4.4.15</span>
	$N_R(\mathcal{G})$ is an inverse semigroup under products, and the inverse of $f\in N_R(\mathcal{G})$ is precisely the inverse relative to $D_R(\mathcal{G})$.
	</p>
</div>

<p>
<a class='proofbutton' data-tag='propositionNRGisinversesemigroup'>Proof</a>
</p>

<div class='proof' id='proofofpropositionNRGisinversesemigroup'>
	<p>
	Since $D_R(\mathcal{G})$ is commutative, we can use Lemma <span class='ref' data-tag='lemmanormalizerssteinbergalgebradiagonal1'></span>(a) for $f,g\in N_R(\mathcal{G})$ to obtain
	<div class='equation'>\begin{align*}
		(fg)(g^*f^*)(fg)
		&=f(gg^*)(f^*f)g\\
		&=f(f^*f)(gg^*)g\\
		&=fg,
	\end{align*}</div>
	and similarly $(g^*f^*)(gf)(g^*f^*)=g^*f^*$. Moreover,
	<div class='equation'>\begin{align*}
	(fg)D_R(\mathcal{G})(g^*f^*)
		&=f\left(gD_R(\mathcal{G})g^*\right)f^*\\
		&\subseteq fD_R(\mathcal{G})f^*\\
		&\subseteq D_R(\mathcal{G}),
	\end{align*}</div>
	and similarly $(g^*f^*)D_R(\mathcal{G})(fg)\subseteq D_R(\mathcal{G})$. This means that $fg\in N_R(\mathcal{G})$, with inverse relative to $D_R(\mathcal{G})$ equal to $g^*f^*$. Therefore $N_R(\mathcal{G})$ is a regular semigroup.
	</p>
	
	<p>
	We will prove that $N_R(\mathcal{G})$ is an inverse semigroup by proving that its idempotents commute. Let $f\in E(N_R(\mathcal{G}))$, that is, $f^2=f$. Then since $ff^*,f^*f\in D_R(\mathcal{G})$ (Lemma <span class='ref' data-tag='lemmanormalizerssteinbergalgebradiagonal1'></span>(a)),
	<div class='equation'>\begin{align*}
	f^*
		&=f^*ff^*\\
		&=(f^*f)(ff^*)\\
		&=(ff^*)(f^*f)\\
		&=f(ff^*)(f^*f)f\\
		&=f(f^*f)(ff^*)f\\
		&=f^2\\
		&=f,
	\end{align*}</div>
	and thus $f=f^*f\in D_R(\mathcal{G})$. This proves $E(N_R(\mathcal{G}))\subseteq D_R(\mathcal{G})$, so idempotents in $N_R(\mathcal{G})$ commute and $N_R(\mathcal{G})$ is an inverse semigroup.<span class='qed'></span>
	</p>
</div>

<p>
The following property was considered in [<span class='ref' data-tag='MR3873946'></span>], when working on the same recovery problem.
</p>

<!-- 4.4.16 -->
<div class='definition' id='definitionlocalbisectionhypothesis'>
	<p><span class='envidentifier'>Definition 4.4.16</span>
	If $\mathcal{G}$ is an ample Hausdorff groupoid and $R$ is an indecomposable (commutative, unital) ring, we say that $(\mathcal{G},R)$ satisfies the <em>local bisection hypothesis</em> if $\supp(f)$ is a bisection for all $f\in N_R(\mathcal{G})$.
	</p>
</div>

<p>
The following stronger condition was considered in [<span class='ref' data-tag='MR3848066'></span>], and is more easily checked than the one above.
</p>

<!-- 4.4.17 -->
<div class='definition'>
	<p><span class='envidentifier'>Definition 4.4.17</span>
	If $\mathcal{G}$ is an ample Hausdorff groupoid and $R$ is an indecomposable (commutative, unital) ring, we say that $(\mathcal{G},R)$ <em>satisfies condition (S)</em> if the set of all $x\in\mathcal{G}^{(0)}$ such that the group ring $R\mathcal{G}_x^x$ has only trivial units (<span class='ref' data-tag='footnote441' id='footnote441'></span>) is dense in $\mathcal{G}^{(0)}$.
	</p>
</div>

<p>
The property of a group-ring $RG$ (where $G$ is a group and $R$ is a ring) having only trivial units has been studied, for example, in [<span class='ref' data-tag='MR0002137'></span>]. A group $G$ is <em>indexed</em> if there exists a non-trivial group morphism from $G$ to $\mathbb{Z}$, and <em>indicable throughout</em> if every nontrivial finitely generated subgroup of $G$ is indexed. (Note that if $G$ is indicable throughout then $G$ is torsion-free.)
</p>

<!-- 4.4.18 -->
<div class='theorem'>
	<p><span class='envidentifier'>Theorem 4.4.18
	<span style='font-weight:normal;'>([<span class='ref' data-tag='MR0002137'></span>, Theorem 13])</span></span>
	If $G$ is indicable throughout and $R$ is an integral domain, then $RG$ has only trivial units.
	</p>
</div>

<p>
Every free group, and every torsion-free abelian group is indicable throughout. The class of indicable throughout groups is closed under products, free products and extensions (see [<span class='ref' data-tag='MR0002137'></span>]).
</p>

<p>
We now prove that condition (S) implies the local bisection hypothesis, as first proved in [<span class='ref' data-tag='MR3848066'></span>, Lemma 3.5].
</p>

<!-- 4.4.19 -->
<div class='lemma' id='lemmanormalizerssteinbergalgebradiagonal2'>
	<p><span class='envidentifier'>Lemma 4.4.19</span>
	Suppose that $\mathcal{G}$ is an ample Hausdorff groupoid, $R$ is an indecomposable ring and $f\in N_R(\mathcal{G})$.
	<ol class='alphpar'>
		<li>
		$ff^*=1_{\so(\supp(f^*))}=1_{\ra(\supp(f))}$, and similarly $f^*f=1_{\so(\supp(f))}=1_{\ra(\supp(f^*))}$.
		</li>
		
		<li>
		For all $U\subseteq\so(\supp(f))$, $f1_Uf^*=1_{\ra(\supp(f)\cap\so^{-1}(U))}=1_{\so(\supp(f^*)\cap\ra^{-1}(U))}$.
		</li>
		
		<li>
		If $\supp(f)$ is a bisection, then for all $a\in\supp(f)$ we have $f^*(a^{-1})=f(a)^{-1}$.
		</li>
	</ol>
	</p>
</div>

<p>
<a class='proofbutton' data-tag='lemmanormalizerssteinbergalgebradiagonal2'>Proof</a>
</p>

<div class='proof' id='proofoflemmanormalizerssteinbergalgebradiagonal2'>
	<ol class='alphpar'>
		<li>
		$ff^*\in D_R(\mathcal{G})$ and $(ff^*)^2=ff^*$, so since $R$ has only trivial idempotents we obtain $ff^*=1_U$ for some $U\in\KB(\mathcal{G}^{(0)})$. Note that
		<div class='equation'>\begin{align*}
			1_Uf
				&=ff^*f=f
		\end{align*}</div>
		and
		<div class='equation'>\begin{align*}
			f^*1_U
				&=f^*ff^*=f^*,
		\end{align*}</div>
		so $\ra(\supp(f))\cup \so(\supp(f^*))\subseteq U$. On the other hand,
		<div class='equation'>\begin{align*}
			U
				&=\supp(ff^*)\\
				&=\so(\supp(ff^*))\\
				&\subseteq\so(\supp(f)\supp(f^*))\\
				&\subseteq\so(\supp(f^*)),
		\end{align*}</div>
		therefore $U=\so(\supp(f^*))$, and similarly $U=\ra(\supp(f))$.
		</li>
		
		<li>
		Let $U$ be a compact-open subset of $\so(\supp(f))$. In particular, $1_U\in N_R(\mathcal{G})$ and so $f1_U\in N_R(\mathcal{G})$ as well, by Proposition <span class='ref' data-tag='propositionNRGisinversesemigroup'></span>. By (a), we have
		<div class='equation'>\begin{align*}
			f1_Uf^*
				&=(f1_U)(1_U f^*)\\
				&=1_{\ra(\supp(f1_U))}\\
				&=1_{\ra(\supp(f)\cap\so^{-1}(U))},
		\end{align*}</div>
		and similarly $f1_Uf^*=1_{\so(\supp(f^*)\cap\ra^{-1}(U))}$.
		</li>
		
		<li>
		If $a\in\supp(f)$, then, by item (a), we have
		<div class='equation'>\begin{align*}
			1
				&=f^*f(\so(a))\\
				&=\sum_{cd=\so(a)}f^*(c)f(d).
		\end{align*}</div>
		Since $\supp(f)$ is a bisection, the only element $d\in\supp(f)$ with $\so(d)=\so(a)$ is $d=a$ itself, that is,
		<div class='equation'>\begin{align*}
			1
				&=f^*(a^{-1})f(a),
		\end{align*}</div>
		which means that $f^*(a^{-1})=f(a)^{-1}$.<span class='qed'></span>
		</li>
	</ol>
</div>

<!-- 4.4.20 -->
<div class='proposition' id='propositionconditionsimplieslocalbisectionhypothesis'>
	<p><span class='envidentifier'>Proposition 4.4.20</span>
	Suppose that $\mathcal{G}$ is an ample Hausdorff groupoid, $R$ is an indecomposable ring and that $(\mathcal{G},R)$ satisfies condition (S). Then $(\mathcal{G},R)$ satisfies the local bisection hypothesis.
	</p>
</div>

<p>
<a class='proofbutton' data-tag='propositionconditionsimplieslocalbisectionhypothesis'>Proof</a>
</p>

<div class='proof' id='proofofpropositionconditionsimplieslocalbisectionhypothesis'>
	<p>
	Given $f\in N_R(\mathcal{G})$, we need to prove that $\supp(f)$ is a bisection.
	</p>
	
	<p>
	Let $a_0\in\supp(f)$, $x=\so(a_0)$ and $y=\ra(a_0)$. First, assume that the group ring $R\mathcal{G}_x^x$ has only trivial units. Let us show that $\supp(f)\cap\mathcal{G}_x^y=\left\{a_0\right\}$.
	</p>
	
	<p>
	Since $\mathcal{G}_x$ is discrete and $\supp(f)$ is compact then $\supp(f)\cap\mathcal{G}_x$ is finite, so the set $\ra\left(\supp(f)\cap\mathcal{G}_x\right)$ is also finite and contains $y$. Choose a compact-open subset $U\subseteq\mathcal{G}^{(0)}$ such that
	<div class='equation'>\begin{align*}
		\ra\left(\supp(f)\cap\mathcal{G}_x\right)\cap U
			&=\left\{y\right\}.
	\end{align*}</div>
	</p>
	
	<p>
	Given $b\in\mathcal{G}_x$, we have
	<div class='equation'>\begin{align*}
		f^*1_Uf(b)
			&=\sum_{\substack{cd=b\\\ra(d)\in U}}f^*(c)f(d).
	\end{align*}</div>
	Of course, in the sum above we just need to consider $d\in\supp(f)$, so if $\ra(d)\in U$ as well we will obtain $\ra(d)=y$. Thus we can rewrite
	<div class='equation' id='equationproofconditionsimplieslocal1'>\begin{align*}
		f^*1_Uf(b)
			&=\sum_{\substack{cd=b\\\ra(d)=y}}f^*(c)f(d).\tag{4.4.3}
	\end{align*}</div>
	Now by Lemma <span class='ref' data-tag='lemmanormalizerssteinbergalgebradiagonal2'></span>, $f^*1_Uf=1_{\so(\supp(f)\cap \ra^{-1}(U))}$. But since $\so(\supp(f)\cap \ra^{-1}(U))$ is contained in $\mathcal{G}^{(0)}$ and contains $\so(a)=x$, then for all $b\in \mathcal{G}_x^x$,
	<div class='equation' id='equationproofconditionsimplieslocal2'>\begin{align*}
		f^*1_Uf(b)
			&=\begin{cases}
					1,&\text{if }b=x,\\
					0,&\text{otherwise.}
				\end{cases}\tag{4.4.4}
	\end{align*}</div>
	</p>
	
	<p>
	Consider the elements of the group ring $R\mathcal{G}_x^x$
	<div class='equation'>\begin{align*}
	\alpha=\sum_{d\in\mathcal{G}_x^y}f(d)a_0^{-1}d,
		&\quad\beta=\sum_{c\in\mathcal{G}_y^x}f^*(c)ca_0.
	\end{align*}</div>
	Then using Equations (<span class='ref' data-tag='equationproofconditionsimplieslocal1'></span>) and (<span class='ref' data-tag='equationproofconditionsimplieslocal2'></span>),
	<div class='equation' id='equationproofconditionsimplieslocal'>\begin{align*}
	\beta\alpha
		&=\sum_{b\in\mathcal{G}_x^x}\left(\sum_{\substack{cd=b\\\ra(d)=y}}f^*(c)f(d)\right)b\\
		&=\sum_{\substack{cd=x\\\ra(d)=y}}f^*(c)f(d)x\\
		&=x,\tag{4.4.5}
	\end{align*}</div>
	and similarly $\alpha\beta=x$, by using the facts that $R$ is commutative and $cd=x$ if and only if $a_0^{-1}dca_0=x$).
	</p>

	<p>
	Since $x$ is the unit of $R\mathcal{G}_x^x$, the computation above proves that $\alpha$ is invertible in $R\mathcal{G}_x^x$, hence it is a trivial invertible, which means that $\supp(f)\cap\mathcal{G}_x^y$ is a singleton. Since $a_0$ is by construction in this set, we are done with this first part. Moreover, Equation (<span class='ref' data-tag='equationproofconditionsimplieslocal'></span>) implies that $f^*(a_0^{-1})=f(a_0)^{-1}$.
	</p>

	<p>
	Now we show that $\supp(f)\cap\mathcal{G}_x=\left\{a_0\right\}$. Suppose that $b_0\in\supp(f)\cap \mathcal{G}_x\setminus\left\{a_0\right\}$. The same way as above, take $V\in\KB(\mathcal{G}^{(0)})$ such that $V\cap \ra(\supp(f))=\left\{y,\ra(b_0)\right\}$. We already know from above that $\left\{b_0\right\}=\supp(f)\cap\mathcal{G}_x^{\ra(b_0)}$ and that $f^*(b_0^{-1})=f(b_0)^{-1}$, and similarly for $a_0$, so Lemma <span class='ref' data-tag='lemmanormalizerssteinbergalgebradiagonal2'></span>(b) yields
	<div class='equation'>\begin{align*}
	1
		&=1_{\so(\ra^{-1}(V)\cap\supp(f))}(x)\\
		&=f^*1_Vf(x)\\
		&=\sum_{\substack{cd=x\\\ra(d)\in V}}f^*(c)f(d)\\
		&=\sum_{\substack{cd=x\\\ra(d)=y\text{ or }\ra(b_0)}}f^*(c)f(d)\\
		&=f^*(a_0^{-1})f(a_0)+f^*(b_0^{-1})f(b_0)\\
		&=2,
	\end{align*}</div>
	a contradiction to $R$ being a non-trivial ring.
	</p>

	<p>
	Now to the general case, suppose $a,b\in\supp(f)$ with $\so(a)=\so(b)$. Take any two bisections $U$ and $V$ containing $a$ and $b$, respectively. Then $\so(U)\cap \so(V)$ is a nonempty open set, so there is $x\in \so(U)\cap \so(V)$ satisfying the condition described in (S). This implies that $\supp(f)\cap\mathcal{G}_x$ is a singleton intersecting both $U$ and $V$, and therefore is contained in both $U$ and $V$ simultaneously. Since $\mathcal{G}$ is Hausdorff, this implies that $a=b$, so the source map is injective on $\supp(f)$. The range is dealt with similarly.<span class='qed'></span>
	</p>
</div>

<p>
An important class of groupoids consists of the <em>topologically principal</em> ones, whose associated algebras have been extensively studied (see, for example, [<span class='ref' data-tag='MR3189105'></span>, <span class='ref' data-tag='MR2745642'></span>, <span class='ref' data-tag='MR1681679'></span>, <span class='ref' data-tag='MR2590626'></span>]). In fact it is possible to classify $C^*$-algebras which come from them (see [<span class='ref' data-tag='MR2460017'></span>]).
</p>

<!-- 4.4.21 -->
<div class='definition' id='definitiontopologicallyprincipal'>
	<p><span class='envidentifier'>Definition 4.4.21</span>
	A topological groupoid $\mathcal{G}$ is <em>topologically principal</em> if the set of all $x\in X$ whose isotropy group $\mathcal{G}_x^x$ is trivial is dense in $\mathcal{G}^{(0)}$.
	</p>
</div>

<p>
As an immediate consequence of the previous propositions, we obtain the following:
</p>

<!-- 4.4.22 -->
<div class='corollary' id='corollarytopologicallyprincipalsatisfieslocalbisectionhypothesis'>
	<p><span class='envidentifier'>Corollary 4.4.22</span>
	If $\mathcal{G}$ is an ample Hausdorff topologically principal groupoid and $R$ is an indecomposable ring, then $(\mathcal{G},R)$ satisfies the local bisection hypothesis.
	</p>
</div>

<p>
We are ready to classify diagonal-preserving isomorphisms of Steinberg algebras of groupoids and rings satisfying the local bisection hypothesis. For this, let us first define the class of maps of interest:
</p>

<!-- 4.4.23 -->
<div class='definition' id='definitioncocycle'>
	<p><span class='envidentifier'>Definition 4.4.23</span>
	Let $R$ and $S$ be rings and $\mathcal{G}$ be a groupoid. Denote by $\operatorname{Iso}_+(R,S)$ the set of additive isomorphisms from $R$ to $S$. A map $\chi:\mathcal{G}\to\operatorname{Iso}_+(R,S)$ satisfying $\chi(ab)(rs)=\chi(a)(r)\chi(b)(s)$ for all $(a,b)\in\mathcal{G}^{(2)}$ and $r,s\in R$ will be called a <em>cocycle</em>.
	</p>
</div>

<!-- 4.4.24 -->
<div class='example'>
	<p><span class='envidentifier'>Example 4.4.24</span>
	Consider $C_2=\left\{1,g\right\}$, the group of order 2, acting on itself by left multiplication and consider the transformation groupoid $\mathcal{G}=C_2\ltimes C_2$.
	</p>

	<p>
	Let $R=S=\mathbb{Z}$. If we define $\chi:\mathcal{G}\to\operatorname{Iso}_+(R,S)$ by $\chi(1,y)(r)=r$ and $\chi(g,r)=-r$, then $\chi$ is a cocycle. Note that $\chi(g,1)$ is not a ring isomorphism.
	</p>
</div>

<!-- 4.4.25 -->
<div class='example'>
	<p><span class='envidentifier'>Example 4.4.25</span>
	Suppose $R$ is a unital ring and $\chi:\mathcal{G}\to\operatorname{Iso}_+(R,R)$ is a cocycle. Then $\chi$ is a morphism from the groupoid $\mathcal{G}$ to the group (under composition) $\operatorname{Iso}_+(R,R)$ if, and only if, $\chi(x)=\id_R$ for all $x\in \mathcal{G}^{(0)}$.
	</p>
	
	<p>
	Indeed, assume $\chi(x)=\id_R$ for all $x\in\mathcal{G}^{(0)}$. If $(a,b)\in\mathcal{G}^{(2)}$ and $r\in R$, then the cocycle condition yields
	<div class='equation'>\begin{align*}
		\chi(a)\left(\chi(b)(r)\right)
			&=\chi(a\so(a))(1\chi(b)(r))\\
			&=\chi(a)(1)\chi(\so(a))(\chi(b)(r)),
	\end{align*}</div>
	and since $\chi(\so(a))=\id_R$, we have
	<div class='equation'>\begin{align*}
	\chi(a)\left(\chi(b)(r)\right)
		&=\chi(a)(1)\chi(b)(r)\\
		&=\chi(ab)(r),
	\end{align*}</div>
	where the last equality follows from the cocycle condition again. Thus $\chi(ab)=\chi(a)\circ\chi(b)$, so $\chi$ is a morphism.
	</p>
	
	<p>
	The converse is trivial, since groupoid morphisms map units to units, and the only unit of the group $\operatorname{Iso}_+(R,R)$ is the identity map of $R$.
	</p>
</div>

<!-- 4.4.26 -->
<div class='proposition' id='proposition4426'>
	<p><span class='envidentifier'>Proposition 4.4.26</span>
	Let $R$ and $S$ be commutative unital rings, $\mathcal{G}$ a groupoid and $\chi:\mathcal{G}\to\operatorname{Iso}_+(R,S)$ a cocycle. Then
	<ol class='alphpar'>
		<li>
		For all $x\in\mathcal{G}^{(0)}$, $\chi(x)$ is a ring isomorphism.
		</li>
		
		<li>
		For all $a\in\mathcal{G}$, if $u\in R$ is invertible then $\chi(a)(u)$ is invertible in $S$, and $\chi(a)(u)^{-1}=\chi(a^{-1})(u^{-1})$.
		</li>
		
		<li>
		For all $a\in\mathcal{G}$, $\chi(\so(a))=\chi(\ra(a))$. In other words, the restriction of $\chi$ to $\mathcal{G}^{(0)}$ is <em>invariant</em>.
		</li>
	</ol>
	</p>
</div>

<a class='proofbutton' data-tag='proposition4426'>Proof</a>

<div class='proof' id='proofofproposition4426'>
	<p>
	The cocycle condition states that
	<div class='equation'>\begin{align*}
	\chi(ab)(rs)&=\chi(a)(r)\chi(b)(s)
	\end{align*}</div>
	for all $a,b,r,s$.
	</p>
	
	<p>
	Taking $a=b=x$ yields (a). Taking $b=a^{-1}$, $r=u$ and $s=u^{-1}$ yields (b), and for item (c) we use commutativity of $S$:
	<div class='equation'>\begin{align*}
		\chi(\so(a))(r)
			&=\chi(a^{-1}a)(1r)\\
			&=\chi(a^{-1})(1)\chi(a)(r)\\
			&=\chi(a)(r)\chi(a^{-1})(1)\\
			&=\chi(\ra(a))(r).
	\end{align*}<span class='qed'></span>
	</div>
	</p>
</div>

<p>
We endow $\operatorname{Iso}_+(R,S)$ with the topology of pointwise convergence, so that a map $\chi$ from a topological space $X$ to $\operatorname{Iso}_+(R,S)$ is continuous if and only if for every $r\in R$, the map $X\ni x\mapsto\chi(x)(r)\in S$ is continuous, that is, locally constant.
</p>

<!-- 4.4.27 -->
<div class='theorem' id='theoremsteinbergalgebras'>
	<p><span class='envidentifier'>Theorem 4.4.27</span>
	Let $\mathcal{G}$ and $\mathcal{H}$ be ample Hausdorff groupoids. Let $R$ and $S$ be two indecomposable (commutative, unital) rings such that $(\mathcal{G},R)$ and $(\mathcal{H},S)$ satisfy the local bisection hypothesis. Let $T:A_R(\mathcal{G})\to A_S(\mathcal{H})$ be a diagonal-preserving ring isomorphism, that is, $T(D_R(\mathcal{G}))=D_S(\mathcal{H})$.
	</p>
	
	<p>
	Then there exists a unique topological groupoid isomorphism $\phi:\mathcal{H}\to\mathcal{G}$ and a continuous cocycle $\chi:\mathcal{H}\to\operatorname{Iso}_+(R,S)$ such that $Tf(a)=\chi(a)(f(\phi(a)))$ for all $a\in\mathcal{H}$ and $f\in A_R(\mathcal{G})$.
	</p>
</div>

<p>
To prove this theorem we will use the theory of disjoint functions from the previous chapter. Recall that if $f\in A_R(\mathcal{G})$ then $\supp(f)=\left\{a\in\mathcal{G}:f(x)\neq 0\right\}$ is compact-open, that $A_R(\mathcal{G})$ coincides with $C_c(\mathcal{G})$ and that $A_R(\mathcal{G})$ is regular (in the sense of Definition <span class='ref' data-tag='definitionregularperpp'></span>), since $\mathcal{G}$ is zero-dimensional, and similarly for $\mathcal{H}$ and $S$. We refer to <a href='../3.dcf/3.1.dpapi.html'>Section 3.1</a> for the notation and nomenclature.
</p>

<p>
<a class='proofbutton' data-tag='theoremsteinbergalgebras'>Proof</a> of Theorem <span class='ref' data-tag='theoremsteinbergalgebras'></span>
</p>

<div class='proof' id='proofoftheoremsteinbergalgebras'>
	<p>
	Since $T$ preserves the respective diagonal algebras, it also preserves their normalizers, i.e., $T(N_R(\mathcal{G}))=N_S(\mathcal{H})$. Let us describe disjointness first for elements in $N_R(\mathcal{G})$. The local bisection hypothesis implies, by Lemma <span class='ref' data-tag='lemmanormalizerssteinbergalgebradiagonal2'></span>(c), that an element $f$ of $N_R(\mathcal{G})$ has the form
	<div class='equation'>\begin{align*}
		f
			&=\sum_{i=1}^n\lambda_i1_{U_i},
	\end{align*}</div>
	where $\lambda_1,\ldots,\lambda_n$ are invertible elements in $R$ and $U_1,\ldots,U_n$ are disjoint compact-open bisections of $\mathcal{G}$ such that $\bigcup_{i=1}^n U_i=\supp(f)$ is also a compact-open bisection. A similar statement holds for $N_S(\mathcal{H})$.
	</p>
	
	<p>
	If $f,g\in N_R(\mathcal{G})$, then $f\subseteq g$ if and only if $f=g p$ for some $p\in D_R(\mathcal{G})$. Indeed,
	<ul>
		<li>
			If $f=gp$ then $\supp(f)\subseteq\supp(g)\supp(p)\subseteq\supp(g)$.
		</li>
		
		<li>
			Conversely, if $\supp(f)\subseteq\supp(g)$ take $p=g^*f$. Then
			<div class='equation'>\begin{align*}
				\supp(p)
					&\subseteq\supp(g^*)\supp(f)\\
					&\subseteq(\supp(g))^{-1}\supp(g)\\
					&\subseteq\mathcal{G}^{(0)},
			\end{align*}</div>
			where the last inclusion follows from $\supp(g)$ being a bisection. The equality $f=gp$ then follows from Lemma <span class='ref' data-tag='lemmanormalizerssteinbergalgebradiagonal2'></span>(a).
		</li>
	</ul>
	</p>
	
	<p>
	Therefore $T$ preserves inclusion of normalizers. Since $N_R(\mathcal{G})$ contains the collection $\left\{1_U:U\in\KB(\mathcal{G})\right\}$ then it is regular (Definition <span class='ref' data-tag='definitionregularperpp'></span>), because $\KB(\mathcal{G})$ is a basis for the topology of $\mathcal{G}$. Hence $T$ also preserver disjointness of normalizers (Theorem <span class='ref' data-tag='theoremrelationsrelations'></span>).
	</p>
	
	<p>
	To prove that $T$ preserves disjointness in all of $A_R(\mathcal{G})$, we decompose elements of $A_R(\mathcal{G})$ in terms of elements of $N_R(\mathcal{G})$ and $D_R(\mathcal{G})$: if $f,g\in A_R(\mathcal{G})$, then $f\perp g$ if and only if there are finite collections of normalizers $f_i,g_j\in N_R(\mathcal{G})$ and elements $\widetilde{f_i},\widetilde{g_j}\in D_R(\mathcal{G})$ ($1\leq i\leq n$, $1\leq j\leq m$) such that
	<div class='equation'>\begin{align*}
	f
		&=\sum_i f_i\widetilde{f_i},\quad g=\sum_j g_j\widetilde{g_j}\text{ and }f_i\perp g_j\text{ for all }i,j.
	\end{align*}</div>
	Indeed,
	<ul>
		<li>
		If there are such $f_i,g_j,\widetilde{f_i},\widetilde{g_j}$ then $\supp(f)\subseteq\bigcup_i\supp(f_i)$ and $\supp(g)\subseteq\bigcup_j\supp(g_j)$, and the latter sets are disjoint.
		</li>
		
		<li>
		Conversely, we write $f=\sum_i\lambda_i1_{A_i}$, where the $A_i$ are pairwise disjoint compact-open bisections and $\lambda_i\neq 0$, and take $f_i=1_{A_i}$ and $\widetilde{f_i}=\lambda_i1_{\so(A_i)}$, so that $\supp(f)=\bigcup_{i=1}^n\supp(f_i)$. Similarly, writing $g=\sum_j\widetilde{g_j}g_j$ where $g_j\in N_R(\mathcal{G})$ and $\supp(g)=\bigcup_j\supp(g_j)$, then $f\perp g$ implies $f_i\perp g_j$ for all $i$ and $j$.
		</li>
	</ul>
	Therefore, $T$ is a $\perp$-isomorphism. Note that $\perpp$ and $\perp$ coincide in $A_R(\mathcal{G})$, since its elements are locally constant (similarly to Example <span class='ref' data-tag='examplekaniarmoutil'></span>). Then $T$ is a $\perpp$-isomorphism. Let $\phi:\mathcal{H}\to\mathcal{G}$ be the $T$-homeomorphism.
	</p>
	
	<p>
	The verification that $\phi$ is a groupoid isomorphism is similar to that of Theorem <span class='ref' data-tag='theoremmeasuredgroupoidconvolutionalgebra'></span>: Assuming $(a,b)\in\mathcal{H}^{(2)}$, but such that $\phi(ab)$ is not equal to $\phi(a)\phi(b)$ (which might not even be defined), we can use continuity of the multiplication or Lemma <span class='ref' data-tag='lemmaproduct'></span> to find compact-open bisections $U$ and $V$ containing $a$ and $b$, respectively, such that $\phi(ab)\not\in\phi(U)\phi(V)$. Then $ab\in\supp(1_{UV})$, so
	<div class='equation'>\begin{align*}
		\phi(ab)
			&\in\supp(T1_{UV})\\
			&=\supp((T1_U)(T1_V)))\\
			&\subseteq\supp(T1_U)\supp(T1_V)\\
			&=\phi(U)\phi(V),
	\end{align*}</div>
	a contradiction.
	</p>
	
	<p>
	Since elements of $A_R(\mathcal{G})$ (and of $A_S(\mathcal{H})$) are locally constant, we have
	<div class='equation'>\begin{align*}
		f(\phi(a))=0
			&\iff \phi(a)\in Z(f)\\
			&\iff x\in Z(Tf)\\
			&\iff Tf(a)=0,
	\end{align*}</div>
	and therefore $T$ is basic (by additivity of $T$ and Proposition <span class='ref' data-tag='propositionbasicnessofgroupvalued'></span>). Let $\chi$ be the $T$-transform. Since $T$ is additive with the pointwise operations, each section $\chi(\alpha)=\chi(\alpha,\cdot)$ is additive (by Proposition <span class='ref' data-tag='propositionmodelmorphism'></span>). This yields a map $\chi:\mathcal{G}\to\operatorname{Iso}_+(R,S)$ such that
	<div class='equation'>\begin{align*}
	Tf(a)
		&=\chi(a)(f(\phi(a))),\qquad\text{for all}\quad f\in A_R(\mathcal{G})\quad\text{and}\quad a\in\mathcal{H}.
	\end{align*}</div>
	</p>
	
	<p>
	We need now to verify that $\chi$ is a cocycle.
	</p>
	
	<p>
	If $(a,b)\in\mathcal{H}^{(2)}$ and $r,s\in R$, choose compact-open bisections $U,V$ of $\mathcal{G}$ containing $\phi(a)$ and $\phi(b)$, respectively. Then using multiplicativity of $T$ we obtain
	<div class='equation'>\begin{align*}
		\chi(ab)(rs)
			&=\chi(ab)\big((r1_U)(s1_V)(\phi(ab))\big)\\
			&=T\big((r1_U)(s1_V)\big)(ab)\\
			&=\big(T(r1_U)T(s1_V)\big)(ab)\\
			&=\sum_{cd=ab}T(r1_U)(c)T(s1_V)(d)\\
			&=\sum_{cd=ab}\chi(c)\big(r1_U(\phi(c))\big)\chi(d)\big(s1_V(\phi(d))\big).
	\end{align*}</div>
	If $cd=ab$, then $\ra(c)=\ra(a)$, so $\ra(\phi(c))=\ra(\phi(a))$. If also $\phi(c)\in\supp(1_U)$ we have $\phi(c)=\phi(a)$, because $U$ is a bisection, so $c=a$ and $d=c^{-1}ab=b$. Therefore,
	<div class='equation'>\begin{align*}
	\chi(ab)(rs)
		&=\chi(a)(r)\chi(b)(s).
	\end{align*}</div>
	Thus, $\chi$ is a cocycle.
	</p>

	<p>
	It remains only to prove that $\chi$ is continuous: Let $r\in R$ be fixed, $a\in\mathcal{H}$ and $U$ any compact-open bisection containing $\phi(a)$. For all $b\in\phi^{-1}(U)$,
	<div class='equation'>\begin{align*}
		\chi(b)(r)
			&=\chi(b)(r1_U(\phi(b)))\\
			&=T(r1_U)(b),
	\end{align*}</div>
	which means that the map $b\mapsto\chi(b)(r)$ coincides with $T(r1_U)$ on $\phi^{-1}(U)$ and thus it is continuous.<span class='qed'></span>
	</p>
</div>

<p>
We should note that according to [<span class='ref' data-tag='MR3873946'></span>], the local bisection hypothesis is preserved by diagonal-preserving isomorphisms, so the same result is valid if we assume, in principle, that only $(\mathcal{G},R)$ satisfies this condition.
</p>

<p>
From this we can immediately classify the group of diagonal-preserving automorphisms of Steinberg algebras satisfying the local bisection hypothesis. Let $\mathcal{G}$ be a groupoid and $R$ a ring. Denote by $\operatorname{Coc}(\mathcal{G},R)$ the set of all continuous cocycles $\chi:\mathcal{G}\to\operatorname{Iso}_+(R,R)$, which is a group with the canonical (pointwise) structure: $(\chi\rho)(a)=\chi(a)\circ\rho(a)$ for all $\chi,\rho\in C(\mathcal{G},R)$ and $a\in\mathcal{G}$, where $\circ$ denotes composition.
</p>

<p>
Let $\operatorname{Aut}(\mathcal{G})$ be the group of topological groupoid automorphisms of $\mathcal{G}$. Then $\operatorname{Aut}(\mathcal{G})$ acts on $\operatorname{Coc}(\mathcal{G},R)$ in the usual (dual) manner: for $\phi\in\operatorname{Aut}(\mathcal{G})$, $\chi\in\operatorname{Coc}(\mathcal{G},R)$ and $a\in\mathcal{G}$ set $(\phi\chi)(a)=\chi(\phi^{-1}a)$.
</p>

<p>
Denote by $\operatorname{Aut}(A_R(\mathcal{G}),D_R(\mathcal{G}))$ the group of diagonal-preserving ring automorphisms of $A_R(\mathcal{G})$.
</p>

<!-- 4.4.28 -->
<div class='corollary' id='corollaryclassificationofautomorphismsofsteinbergalgebras'>
	<p><span class='envidentifier'>Corollary 4.4.28</span>
	If $(\mathcal{G},R)$ satisfies the local bisection hypothesis, then the group $\operatorname{Aut}(A_R(\mathcal{G}),D_R(\mathcal{G}))$ is isomorphic to the semidirect product $\operatorname{Coc}(\mathcal{G},R)\rtimes\operatorname{Aut}(\mathcal{G})$.
	</p>
</div>

<p>
<a class='proofbutton' data-tag='corollaryclassificationofautomorphismsofsteinbergalgebras'>Proof</a>
</p>

<div class='proof' id='proofofcorollaryclassificationofautomorphismsofsteinbergalgebras'>
	<p>
	Given $(\chi,\phi)\in\operatorname{Coc}(\mathcal{G},R)\rtimes\operatorname{Aut}(\mathcal{G})$, set $T_{(\chi,\phi)}\in\operatorname{Aut}(A_R(\mathcal{G}),D_R(\mathcal{G}))$ by 
	<div class='equation'>\begin{align*}
	T_{(\chi,\phi)}f(a)
	&=\chi(a)f(\phi^{-1}(\alpha)),
	\end{align*}</div>
	for all $f\in A_R(\mathcal{G})$ and $a\in\mathcal{G}$.
	</p>
	
	<p>
	The map $(\chi,\phi)\mapsto T_{(\chi,\phi)}$ is a group morphism from $\operatorname{Aut}(A_R(\mathcal{G}),D_R(\mathcal{G}))$ to $\operatorname{Coc}(\mathcal{G},R)\rtimes\operatorname{Aut}(\mathcal{G})$. It is surjective by the previous theorem. As for injectivity, note that $\phi$ and $\chi$ are the homeomorphism and transform associated to the $\perpp$-isomorphism $T_{(\chi,\phi^{-1})}$, and since these are unique we conclude that $(\chi,\phi)\mapsto T_{(\chi,\phi)}$ is an isomorphism.<span class='qed'></span>
	</p>
</div>

<h3 class='subsection' id='sectiondualpartialaction'>4.4.3. Steinberg algebras as crossed products</h3>

<p>
Again, we consider a commutative ring with unit $R$. Given a zero-dimensional, locally compact Hausdorff space $X$, the Steinberg algebra of $X$, as a unit groupoid, is the algebra $A_R(X)$ of locally constant, compactly supported $R$-valued functions on $X$, with pointwise operations.
</p>

<p>
In [<span class='ref' data-tag='MR3743184'></span>], Beuter and Gonalves showed that any Steinberg algebra of a transformation groupoid, given by a partial action of a group, $A_R(G\ltimes X)$, is isomorphic to a crossed product $A_R(X)\rtimes G$ ([<span class='ref' data-tag='MR3743184'></span>, Theorem 3.2]). In the same paper, they proved that every Steinberg Algebra, associated with an ample Hausdorff groupoid $\mathcal{G}$, is isomorphic to the crossed product $A_R(\mathcal{G}^{(0)})\rtimes\KB(\mathcal{G})$ ([<span class='ref' data-tag='MR3743184'></span>, Theorem 5.2]). Similarly, in [<span class='ref' data-tag='arxiv1710.09723'></span>], Demeneghi proved that any Steinberg algebra of a Hausdorff groupoid of germs associated to an ample action of an inverse semigroup $S$ is isomorphic to a crossed product $A_R(X)\rtimes S$ ring (<span class='ref' data-tag='arxiv1710.09723'></span>, Theorem 2.3.6]), and as a consequence obtained the latter result presented by the previous authors ([<span class='ref' data-tag='arxiv1710.09723v1'></span>, Proposition 2.4.3]). Note that these results are non-comparable, since [<span class='ref' data-tag='MR3743184'></span>] deals with partial actions of groups whereas [<span class='ref' data-tag='arxiv1710.09723'></span>] considers actions of semigroups.
</p>

<p>
Our current objective is to generalize both results above. More precisely, let $\theta=\left(\theta_s:X_{s^*}\to X_s\right)_{s\in S}$ be a topological partial action of an inverse semigroup $S$ on a zero-dimensional, locally compact Hausdorff space $X$. Define, for each $s\in S$,
<div class='equation'>\begin{align*}
	D_s
	&=\left\{f \in A_R(X):\operatorname{supp}f\subseteq X_s \right\}.
\end{align*}</div>
We will always identify $D_s$ with $A_R(X_s)$, by extending elements of $A_R(X_s)$ to all of $X$ by zero on $X\setminus X_s$. Define
<div class='equation'>\[
	\begin{array}{rrcl}
	 \alpha_s:	&D_{s^*}	&\to		&D_s\\
				&f			&\mapsto	&f\circ\theta_{s^*}.
	\end{array}
\]</div>
It is routine to check that $\alpha$ is an algebraic partial action of $S$ on $A_R(X)$.
</p>

<!-- 4.4.29 -->
<div class='definition' id='definitiondualpartialaction'>
	<p><span class='envidentifier'>Definition 4.4.29</span>
	$\alpha$ as above is called the partial action <em>induced</em> by $\theta$.
	</p>
</div>

<p>
We will prove that, as long as the groupoid of germs $S\ltimes X$ is Hausdorff, the Steinberg algebra $A_R(S\ltimes_\theta X)$ is isomorphic to the crossed product algebra $A_R(X) \rtimes_\alpha S$. In order to obtain such an isomorphism we will need some preliminary lemmas. Following the notation of <a href='../4.paois/4.2./tpaagog.html#subsectiongroupoidofgerms'>Subsection 4.2.3</a>, recall that for $s\in S$ and $U\subseteq X_{s^*}$, we have defined $[s,U]=\left\{[s,x]:x\in U\right\}$, and that we identify $\so([s,x])$ with $x$.
</p>

<!-- 4.4.30 -->
<div class='lemma' id='lembasicelementsubset'>
	<p><span class='envidentifier'>Lemma 4.4.30</span>
	Given $s\in S$, any subset $B$ of $[s,X_{s^*}]$ is of the form $B=[s,\so(B)]$.
	</p>
</div>

<p>
<a class='proofbutton' data-tag='lembasicelementsubset'>Proof</a>
</p>

<div class='proof' id='proofoflembasicelementsubset'>
	<p>
	Since $[s,X_{s^*}]$ is a bisection (by Proposition <span class='ref' data-tag='propbisectionhomeomorphic'></span>), then for any subset $B\subseteq[s,X_{s^*}]$ we have
	<div class='equation'>\begin{align*}
	B
		&=\so^{-1}(\so(B))\cap[s,X_{s^*}]\\
		&=[s,\so(B)].
	\end{align*}<span class='qed'></span>
	</div>
	</p>
</div>

<!-- 4.4.31 -->
<div class='lemma' id='lemunionbasicelements'>
	<p><span class='envidentifier'>Lemma 4.4.31</span>
	Let $S\ltimes X$ be a Hausdorff groupoid of germs, and consider two finite collections $\left\lbrace\left[s_i,U_i\right]:i=1,\ldots,n\right\}$ and $\left\lbrace\left[t_j,V_j\right]:j=1,\ldots,m\right\rbrace$ of pairwise disjoint basic compact-open bisections of $S\ltimes X$ such that 
	<div class='equation'>\begin{align*}
		\bigcup_{i=1}^n\left[s_i,U_i\right]
			&=\bigcup_{j=1}^m\left[t_j,V_j\right].
	\end{align*}</div>
	</p>
	
	<p>
	Then for each pair $i,j$, there is a finite set  $\left\{\left[u_k^{ij},W_k^{ij}\right]\right\}_{1\leq k\leq l^{ij}}$ of pairwise disjoint basic neighbourhoods of $S\ltimes X$ such that 
	<div class='equation'>\begin{align*}
		\left[s_i,U_i\right]\cap\left[t_j,V_j\right]
		&=\bigcup_{k=1}^{l^{ij}}\left[u_k^{ij},W_k^{ij}\right]
	\end{align*}</div>
	and $u_k^{ij}\leq s_i,t_j$ for each $i,j$.
	</p>
</div>

<p>
<a class='proofbutton' data-tag='lemunionbasicelements'>Proof</a>
</p>

<div class='proof' id='proofoflemunionbasicelements'>
	<p>
	Given $i$ and $j$, let $b$ be an element of $[s_i,U_i]\cap[t_j,V_j]$. Then $[s_i,\so(b)]=b=[t_j,\so(b)]$, so there is $u_b \in S$ such that $\so(b)\in X_{u_b^*}$ and $u_b\leq s_i,t_j$, which implies
	<div class='equation'>\begin{align*}
		b
			&=[u_b,\so(b)]\in[u_b,X_{u_b^*}\cap U_i\cap V_j]\subseteq[s_i,U_i]\cap[t_j,V_j].
	\end{align*}</div>
		Let $W_b=X_{u_b^*}\cap U_i\cap V_j$.
	</p>
	
	<p>
	Applying the procedure above to all $b\in B$, and using compactness of $[s_i,U_i]\cap[t_j,V_j]$, we find a finite cover for this set with elements of the form $ \left[u_k^{ij},W^{ij}_k\right]$ for certain $u^{ij}_k\leq s_i,t_j$ and $W^{ij}_k\subseteq U_i\cap V_j$, that is,
	<div class='equation'>\begin{align*}
		\left[s_i,U_i\right]\cap\left[t_j,V_j\right]
			&=\bigcup_{k=1}^{l^{ij}}\left[u_k^{ij},W^{ij}_k\right].
	\end{align*}</div>
	For $k\geq 2$, we can substitute $\left[u_k^{ij},W^{ij}_k\right]$ by $\left[u_k^{ij},W^{ij}_k\right]\setminus\bigcup_{p=1}^{k-1} \left[u_p^{ij},W^{ij}_i\right]$ if necessary and use Lemma <span class='ref' data-tag='lembasicelementsubset'></span> to rewrite this set as $[u_k^{ij},\widetilde{W}_k^{ij}]$ for appropriate $\widetilde{W}_k^{ij}$, to obtain the desired partition of $[s_i,U_i]\cap[t_j,V_j]$.<span class='qed'></span>
	</p>
</div>

<p>
We now prove another main theorem of this section. We refer to the notations introduced in Definitions <span class='ref' data-tag='definitionLalpha'></span>, <span class='ref' data-tag='definitionNalpha'></span> and <span class='ref' data-tag='definitioncrossedproduct'></span>.
</p>

<!-- 4.4.32 -->
<div class='theorem' id='theoremsteinbergiscrossed'>
	<p><span class='envidentifier'>Theorem 4.4.32</span>
	Let $\theta=\left(\theta_s:X_{s^*}\to X_s\right)_{s\in S}$ be a topological partial action of an inverse semigroup $S$ on a zero-dimensional, locally compact Hausdorff space $X$, and $\alpha=\left(\alpha_s:D_{s^*}\to D_s\right)_{s\in S}$ be the partial action of $S$ on $A_R(X)$ induced by $\theta$ as in Definition <span class='ref' data-tag='definitiondualpartialaction'></span>.
	</p>
	
	<p>
	If the groupoid of germs $S \ltimes_\theta X$ is Hausdorff then the Steinberg $A_R(S \ltimes_\theta X)$ is isomorphic, as an $R$-algebra, to the crossed product $A_R(X) \rtimes_\alpha S$.
	</p>
</div>

<p>
Note that we cannot use the universal property of crossed products described in Theorem <span class='ref' data-tag='theoremuniversalpropertyofcrossedproducts'></span>, because the algebra $D_s$ is not unital if $X_s$ is not compact.
</p>

<p>
The main idea of this proof is to identify a symbol $\delta_s$, as in Definition <span class='ref' data-tag='definitionLalpha'></span>, with the characteristic function of the bisection $[s,X_{s^*}]$, and to use the inclusions $D_s\subseteq A_R(X)$ and the identification of $A_R(X)$ as the diagonal subalgebra of $A_R(S\ltimes X)$ as in Definition <span class='ref' data-tag='definitiondiagonalsteinbergalgebra'></span> and the discussion following it.
</p>

<p>
<a class='proofbutton' data-tag='theoremsteinbergiscrossed'>Proof</a> of Theorem <span class='ref' data-tag='theoremsteinbergiscrossed'></span>
</p>

<div class='proof' id='proofoftheoremsteinbergiscrossed'>
	<p>
	Given a generating element $f_s\delta_s$ of $\mathscr{L}(\alpha)$, define $\phi(f_s\delta_s):S\ltimes X\to R$ as
	<div class='equation'>\begin{align*}
		\phi(f_s\delta_s)(a)
			&=\begin{cases}
				f_s(\ra(a)),&\text{if } a \in [s,X_{s^*}],\\
				0,&\text{otherwise.}
				\end{cases}
	\end{align*}</div>
	</p>
	
	<p>
	We first prove that $\phi(f_s\delta_s)\in A_R(S\ltimes X)$, i.e., that $\phi(f_s\delta_s)$ is locally constant and has compact support. Notice that the definition of $\phi(f_s\delta_s)$ implies
	<div class='equation'>\begin{align*}
		\supp(\phi(f_s\delta_s))
			&=[s,\theta_s^{-1}(\supp(f))],
	\end{align*}</div>
	which is compact-open and in particular clopen because $S\ltimes X$ is Hausdorff.
	</p>
	
	<p>
	Of course, $\phi(f_s\delta_s)$ is constant equal to $0$ on the complement
	<div class='equation'>\[
		(S\ltimes X)\setminus\operatorname{supp}(\phi(f_s\delta_s)),
	\]</div>
	and since $\phi(f_s\delta_s)$ coincides with the composition $f_s\circ\ra$ on $\operatorname{supp}(\phi(f_s\delta_s))$ and $f_s$ is locally constant, then $\phi(f_s\delta_s)$ is also locally constant on $\operatorname{supp}(\phi(f_s\delta_s))$. We conclude that $\phi(f_s\delta_s)$ is locally constant on complementary clopen subsets of $S\ltimes X$, so $\phi(f_s\delta_s)$ is locally constant.
	</p>
	
	<p>
	Using the presentation of $\mathscr{L}(\alpha)$ given in in Definition <span class='ref' data-tag='definitionLalpha'></span>, we extend $\phi$ linearly to an $R$-module morphism $\phi:\mathscr{L}(\alpha)\to A_R(S\ltimes X)$.
	</p>
	
	<p>
	Let us prove that $\phi$ vanishes on all elements of form $f_s\delta_s-f_s\delta_t$, where $s\leq t$ and $f_s \in D_s$.
	</p>
	
	<p>
	Given $a\in S\ltimes X$, we have three possibilities.
	<ul>
		<li><p><u>Case 1</u>: $a\in [s,X_{s^*}]$.</p>

			<p>
			In this case, $a\in [t,X_{t^*}]$ as well, so 
			<div class='equation'>\begin{align*}
				\phi(f_s\delta_s-f_s\delta_t)(a)
					&=f_s(\ra(a))-f_s(\ra(a))\\
					&=0.
			\end{align*}</div>
			</p>
		</li>
		
		<li><p><u>Case 2</u>: $a\in [t,X_{t^*}]\setminus [s,X_{s^*}]$.</p>
		
			<p>
			In this case, $\ra(a)\not\in X_s$, because $\ra$ is injective on $[t,X_{t^*}]$, so $f_s(\ra(a))=0$ because $f_s \in D_s$. Thus,
			<div class='equation'>\begin{align*}
				\phi(f_s\delta_s-f_s\delta_t)(a)
					&=0-f_s(\ra(a))\\
					&=0.
			\end{align*}</div>
			</p>
		</li>
		
		<li><p><u>Case 3</u>: $a\notin [t,X_{t^*}]$.</p>
		
			<p>
			Then $a\not\in [s,X_{s^*}]$ as well, so
			<div class='equation'>\begin{align*}
				\phi(f_s\delta_s-f_s\delta_t)(a)
					&=0-0\\
					&=0.
			\end{align*}</div>
			</p>
		</li>
	</ul>
	</p>
	
	<p>
	Therefore, $\phi$ vanishes on the ideal $\mathscr{N}(\alpha)$, and hence factors through the quotient $\mathscr{L}(\alpha)/\mathscr{N}(\alpha)=A_R(X)\rtimes S$ to an $R$-module morphism $\Phi:A_R(X)\rtimes S\to A_R(S\ltimes X)$. At this point, we have not yet checked that $\Phi$ is an <em>algebra</em> morphism.
	</p>
	
	<p>
	We will now construct the inverse of $\Phi$ using the universal property of Steinberg algebras, given in Theorem <span class='ref' data-tag='theoremuniversalpropertysteinberg'></span>.
	</p>

	<p>
	Given $U\in\KB(S\ltimes X$), decompose $U$ as a disjoint union $U=\bigcup_i[s_i,U_i]$ for certain $s_i\in S$ and compact-open $U_i\subseteq X_{s_i^*}$. Define the element $\psi(U)$ of $A_R(X)\rtimes S$ as
	<div class='equation'>\begin{align*}
		\psi(U)
			&=\sum_{i=1}^n\overline{1_{\theta_{s_i}(U_i)}\delta_{s_i}}.
	\end{align*}</div>
	We need to prove that $\psi$ does not depend on the given decomposition of $U$. Suppose $U=\bigcup_i[s_i,U_i]=\bigcup_j[t_j,V_j]$, both unions being disjoint. By Lemma <span class='ref' data-tag='lemunionbasicelements'></span>, we can find finite collections of elements $u^{ij}_k\leq s_i,t_j$ and $W^{ij}_k\subseteq U_i\cap V_j$ such that for all $i$ and $j$,
	<div class='equation'>\begin{align*}
		[s_i,U_i]\cap[t_j,V_j]
			&=\bigcup_{k=1}^{l^{ij}}[u_k^{ij},W_k^{ij}].
	\end{align*}</div>
	and the sets $W_k^{ij}$ are pairwise disjoint.
	</p>
	
	<p>
	For a fixed $i$, we have
	<div class='equation'>\begin{align*}
		[s_i,U_i]
			&=[s_i,U_i]\cap U\\
			&=\bigcup_{j=1}^m[s_i,U_i]\cap[t_j,V_j]\\
			&=\bigcup_{j=1}^m\bigcup_{k=1}^{l^{ij}}[u_k^{ij},W^{ij}_k]
	\end{align*}</div>
	as a disjoint union, so comparing their ranges we obtain
	<div class='equation'>\begin{align*}
		\theta_{s_i}(U_i)
			&=\bigcup_{j=1}^m\bigcup_{k=1}^{l^{ij}}\theta_{u_k^{ij}}(W_k^{ij}),
	\end{align*}</div>
	and this union is also disjoint, because the range map is injective on $[s_i,U_i]$. Therefore,
	<div class='equation'>\begin{align*}
		1_{\theta_{s_i}(U_i)}
			&=\sum_{j=1}^m\sum_{k=1}^{l^{ij}}1_{\theta_{u_k^{ij}}(W_k^{ij})}.
	\end{align*}</div>
	</p>

	<p>
	Similarly, for a fixed $j$, $1_{\theta_{t_j}(V_j)}=\sum_{i=1}^n\sum_{k=1}^{l^{ij}}1_{\theta_{u_k^{ij}}(w_k^{ij})}$.
	</p>

	<p>
	Now we can compute
	<div class='equation'>\begin{align*}
		\sum_{i=1}^n\overline{1_{\theta_{s_i}(U_i)}\delta_{s_i}}
			&=\sum_{i=1}^n\sum_{j=1}^m\sum_{k=1}^{l^{ij}}\overline{1_{\theta_{u_k^{ij}}(W_k^{ij})}\delta_{s_i}}\\
			&\overset{(\ast)}{=}\sum_{i=1}^n\sum_{j=1}^m\sum_{k=1}^{l^{ij}}\overline{1_{\theta_{u_k^{ij}}(W_k^{ij})}\delta_{u_k^{ij}}}\\
			&\overset{(\ast)}{=}\sum_{j=1}^m\sum_{i=1}^n\sum_{k=1}^{l^{ij}}\overline{1_{\theta_{u_k^{ij}}(W_k^{ij})}\delta_{t_j}}\\
			&=\sum_{j=1}^m\overline{1_{\theta_{t_j}(V_j)}\delta_{t_j}},
	\end{align*}</div>
	where the equalities marked by $(\ast)$ follow because $1_{\theta_{u_k^{ij}}(W_k^{ij})}\in D_{u_k^{ij}}$ and $u_k^{ij}\leq s_i,t_j$. Therefore $\psi(U)$ does not depend on the initial decomposition of $U$. We still need to prove that $\psi$ is a Boolean representation.
	</p>
	
	<p>
	First, suppose that $[s,U]$ and $[t,V]$ are basic bisections in $\KB(S\ltimes X)$. Then
	<div class='equation'>\begin{align*}
		[s,U][t,V]
			&=[st,V\cap\theta_t^{-1}(U\cap X_t)],
	\end{align*}</div>
	so
	<div class='equation'>\begin{align*}
		\psi([s,U][t,V])
			&=\overline{1_{\theta_{st}(V\cap\theta_t^{-1}(U\cap X_t))}\delta_{st}}.
	\end{align*}</div>
	But $V\cap\theta_t^{-1}(U\cap X_t)$ is contained in $X_{t^*}\cap\theta_t^{-1}(X_{s^*}\cap X_t)$, which is the domain of $\theta_s\circ\theta_t$, so we may compute
	<div class='equation'>\begin{align*}
		\theta_{st}(V\cap\theta_t^{-1}(U\cap X_t))
			&=\theta_s(\theta_t(V\cap\theta_t^{-1}(U\cap X_t)))\\
			&=\theta_s(\theta_t(V)\cap U\cap X_t)\\
			&=\theta_s(\theta_t(V)\cap U).
	\end{align*}</div>
	Therefore,
	<div class='equation' id='equationtheoremsteinbergiscrossed1'>\begin{align*}
		\psi([s,U][t,V])
			&=\overline{1_{\theta_s(\theta_t(V)\cap U)}\delta_{st}}.\tag{4.4.6}
	\end{align*}</div>
	On the other hand,
	<div class='equation'>\begin{align*}
		\psi([s,U])\psi([t,V])
			&=\overline{(1_{\theta_s(U)}\delta_s)(1_{\theta_t(V)}\delta_t)}\\
			&=\overline{\alpha_s(\alpha_{s^*}(1_{\theta_s(U)})1_{\theta_t(V)})\delta_{st}}.
	\end{align*}</div>
	Since
	<div class='equation'>\begin{align*}
		\alpha_{s^*}(1_{\theta_s(U)})
			&=1_{\theta_s(U)}\circ\theta_s
			&=1_U,
	\end{align*}</div>
	then
	<div class='equation'>\begin{align*}
		\alpha_s(\alpha_{s^*}(1_{\theta_s(U)})1_{\theta_t(V)})
			&=\alpha_s(1_U1_{\theta_t(V)})\\
			&=\alpha_s(1_{U\cap\theta_t(V)})\\
			&=1_{U\cap\theta_t(V)}\circ\theta_{s^*}\\
			&=1_{\theta_s(U\cap\theta_t(V))},
	\end{align*}</div>
	and thus
	<div class='equation' id='equationtheoremsteinbergiscrossed2'>\begin{align*}
		\psi([s,U])\psi([t,V])
			&=\overline{1_{\theta_s(U\cap\theta_t(V))}\delta_{st}}.\tag{4.4.7}
	\end{align*}</div>
	so Equations (<span class='ref' data-tag='equationtheoremsteinbergiscrossed1'></span>) and (<span class='ref' data-tag='equationtheoremsteinbergiscrossed2'></span>) imply that $\psi([s,U][t,V])=\psi([s,U])\psi([t,V])$. The definition of $\psi$ then readily yields $\psi(AB)=\psi(A)\psi(B)$ for all compact-open bisections $A,B\subseteq S\ltimes X$, i.e., $\psi$ is a semigroup morphism.
	</p>
	
	<p>
	The definition of $\psi$ also makes it clear that $\psi(A\cup B)=\psi(A)+\psi(B)$ whenever $A$ and $B$ are compatible compact-open bisections of $S\ltimes X$ with $A\cap B=\varnothing$, so $\psi$ is a Boolean representation of $\KB(S\ltimes X)$.
	</p>
	
	<p>
	By the universal property $A_R(\mathcal{G})$ (Theorem <span class='ref' data-tag='theoremuniversalpropertysteinberg'></span>), there exists a unique $R$-algebra morphism $\Psi:A_R(S\ltimes X)\to A_R(X)\rtimes S$ satisfying $\Psi(1_U)=\psi(U)$ for all $U\in\KB(\mathcal{G})$. 
	</p>
	
	<p>
	It remains to check that $\Psi$ is the inverse of $\Phi$. Suppose $s\in S$ and $U\subseteq X_{s^*}$. Then
	<div class='equation'>\begin{align*}
		\Phi(\Psi(1_{[s,U]}))
			&=\Phi(\overline{1_{\theta_s(U)}\delta_s})\\
			&=\begin{cases}
					1_{\theta_s(U)}\circ\ra&\text{on }[s,X_{s^*}]\\
					0&\text{everywhere else}
				\end{cases}\\
			&=1_{[s,U]}.
	\end{align*}</div>
	</p>
	
	<p>
	Since the family  $\left\{1_{[s,U]}:s\in S, U\subseteq S_{s^*}\right\}$ generates $A_R(S\ltimes X)$, as an $R$-module, then $\Phi(\Psi(f))=f$ for all $f\in A_R(S\ltimes X)$.
	</p>

	<p>
	In the other direction, if $s\in S$ and $U\subseteq X_s$, by the definition of $\phi$ we have
	<div class='equation'>\begin{align*}
		\Phi(\overline{1_U\delta_s}))
			&=1_{[s,\theta_s^{-1}(U)]},]
	\end{align*}</div>
	so
	<div class='equation'>\begin{align*}
		\Psi(\Phi(\overline{1_U\delta_s}))
			&=\Psi(1_{[s,\theta_s^{-1}(U)]})\\
			&=\overline{1_{\theta_s(\theta_s^{-1}(U))}\delta_s}\\
			&=\overline{1_U\delta_s}.
	\end{align*}</div>
	Since $\left\{\overline{1_U\delta_s}:s\in S,U\subseteq X_s\right\}$ generates $A_R(X)\rtimes S$ as an $R$-module, we conclude that $\Psi(\Phi(x))=x$ for all $x\in A_R(X)\rtimes S$. Therefore, $\Phi=\Psi^{-1}$, and $\Psi$ is an algebra isomorphism.<span class='qed'></span>
	</p>
</div>

<!-- 4.4.33 -->
<div class='remark' id='remarkdiagonalsubalgebras'>
	<p><span class='envidentifier'>Remark 4.4.33</span>
	Note that the isomorphism $\Phi:A_R(X)\rtimes S\to A_R(S\ltimes X)$ obtained in the proof of Theorem <span class='ref' data-tag='theoremsteinbergiscrossed'></span> above maps the diagonal subalgebra of $A_R(X)\rtimes S$ (as in Definition <span class='ref' data-tag='definitiondiagonalcrossedproduct'></span>) to the diagonal subalgebra of $A_R(S\ltimes X)$ (as in Definition <span class='ref' data-tag='definitiondiagonalsteinbergalgebra'></span>). Under the usual identifications of both of these diagonal subalgebras as $A_R(X)$, the isomorphism $\Phi$ restricts to the identity of $A_R(X)$.
	</p>
</div>

<!-- 4.4.34 -->
<div class='corollary' id='corisosteinbergbisection'>
	<p><span class='envidentifier'>Corollary 4.4.34</span>
	Let $\mathcal{G}$ be an ample Hausdorff groupoid. Then the Steinberg Algebra $A_R(\mathcal{G})$ is isomorphic to the crossed products $A_R(\mathcal{G}^{(0)})\rtimes_{\mu}\operatorname{\mathbf{B}}(\mathcal{G})$ and $A_R(\mathcal{G}^{(0)})\rtimes_{\eta}\KB(\mathcal{G})$, where $\mu$ and $\eta$ are induced by the canonical actions of $\operatorname{\mathbf{B}}(\mathcal{G})$ and $\KB(\mathcal{G})$ on $\mathcal{G}^{(0)}$ (Example <span class='ref' data-tag='examplegermesopenbisections'></span>).
	</p>
</div>

<p>
<a class='proofbutton' data-tag='corisosteinbergbisection'>Proof</a>
</p>

<div class='proof' id='proofofcorisosteinbergbisection'>
	<p>
	By Example <span class='ref' data-tag='examplegermesopenbisections'></span>, $\mathcal{G}$ is isomorphic to the groupoids of germs $\operatorname{\bf{B}}(\mathcal{G})\ltimes\mathcal{G}^{(0)}$ and $\KB(\mathcal{G})\ltimes\mathcal{G}^{(0)}$, given by the respective canonical actions of $\operatorname{\bf{B}}(\mathcal{G})$ and $\KB(\mathcal{G})$ on $\mathcal{G}^{(0)}$. Then the desired result follows from Theorem <span class='ref' data-tag='theoremsteinbergiscrossed'></span>.<span class='qedhere'></span>
	</p>
</div>

<p>
It is interesting to note that the crossed products $A_R(\mathcal{G}^{(0)})\rtimes\operatorname{\mathbf{B}}(\mathcal{G})$ and $A_R(\mathcal{G}^{(0)})\rtimes\KB(\mathcal{G})$ arise from <em>global</em> actions and not simply partial actions. Further, using Theorem <span class='ref' data-tag='theoremsteinbergiscrossed'></span> and Corollary <span class='ref' data-tag='corisosteinbergbisection'></span> for the groupoid of germs of a partial action, we obtain
<div class='equation'>\begin{align*}
	A_R(X)\rtimes S
		&\cong A_R(S\ltimes X)\\
		&\cong A_R(X)\rtimes_\eta \KB(S\ltimes X),
\end{align*}</div>
where $\eta$ is induced by the canonical action of $\KB(S\ltimes X)$ on $(S\ltimes X)^{(0)}\cong X$.
</p>

<h3 class='subsection'>4.4.4. Constructing a Steinberg algebra from a crossed product $A_R(X)\rtimes S$</h3>

<p>
In the previous section we saw that the Steinberg algebra of an ample Hausdorff groupoid of germs can be seen as a crossed product of its diagonal subalgebra. In this section we will be interested in the opposite direction, that is, to characterize the crossed products of the form $A_R(X)\rtimes_{\alpha}S$ which can be realized as Steinberg algebras $A_R(S\ltimes_\theta X)$ in such a way that $\alpha$ is the partial action induced by $\theta$. To do this, we need to perform a "point-realization" of algebraic partial actions on algebras of the form $A_R(X)$.
</p>

<p>
Some results of this nature are already known. For example, in the $C^*$-algebraic case, if $X$ is a locally compact Hausdorff space, then every closed ideal of $C_0(X)$ is of the form $C_0(U)\cong\left\{f\in C(X):f=0\text{ on }X\setminus U\right\}$ for some (unique) open set $U\subseteq X$ ([<span class='ref' data-tag='MR1646508'></span>, Exercise 3.2.3(5)]), and the Gelfand-Naimark Theorem ([<span class='ref' data-tag='MR1074574'></span>, Theorem 2.1.10]) implies that every $*$-isomorphism $T:C_0(U)\to C_0(V)$ between two such ideals is of the form $T(f)=f\circ\phi$ for some (unique) homeomorphism $\phi:V\to U$. This gives a one-to-one correspondence between algebraic partial actions of an inverse semigroup $S$ on $C_0(X)$ (by $*$-automorphisms of closed ideals) and topological partial actions of $S$ on $X$.
</p>

<p>
In [<span class='ref' data-tag='MR3506079'></span>], an analogous result in the purely algebraic setting was proven. Namely, let $\mathbb{K}$ be a field, $X$ be a set, and denote by $\mathcal{F}_0(X)$ the $\mathbb{K}$-algebra of $\mathbb{K}$-valued functions on $X$ with finite support, endowed with the pointwise operations. Then ideals of $\mathcal{F}_0(X)$ and their isomorphisms correspond to subsets and partial bijections of $X$, in a manner similar to the one above. This also yields a one-to-one correspondence between the algebraic partial actions of an inverse semigroup $S$ on $X$ and the topological partial actions of $S$ on $\mathcal{F}_0(X)$. 
</p>

<p>
In this section, we will show that the same occurs with partial actions of inverse semigroups on non-discrete spaces. In order to obtain a bijective correspondence between partial actions of $S$ on $X$ and their induced partial actions on $A_R(X)$, we need a few preliminary results. We will use the terminology and notation of <a href='../3.dcf/3.0.intro.html'>Chapter 3</a>.
</p>

<!-- 4.4.35 -->
<div class='proposition' id='propisomorp'>
	<p><span class='envidentifier'>Proposition 4.4.35</span>
	Let $R$ be an indecomposable ring and let $X$ and $Y$ be zero-dimensional, locally compact Hausdorff spaces. A map $T:A_R(X) \rightarrow A_R(Y)$ is an isomorphism of $R$-algebras if and only if there exists a (necessarily unique) homeomorphism $\phi:Y\to X$ such that $T(f)=f\circ\phi$ for all $f\in A_R(X)$.
	</p>
</div>

<p>
<a class='proofbutton' data-tag='propisomorp'>Proof</a>
</p>

<div class='proof' id='proofofpropisomorp'>
	<p>
	The "if" part is straightforward, so suppose that$T:A_R(X)\to A_R(Y)$ is an isomorphism of $R$-algebras. As unit groupoids, $X$ and $Y$ are principal, and their Steinberg algebras $A_R(X)$ and $A_R(Y)$ coincide with the respective diagonals $D_R(X)$ and $D_R(Y)$.
	</p>
	
	<p>
	By Theorem <span class='ref' data-tag='theoremsteinbergalgebras'></span>, we have $Tf(y)=\chi(y)(f(\phi(y)))$ for some homeomorphism $\phi:Y\to X$ and a cocycle $\chi$ (Definition <span class='ref' data-tag='definitioncocycle'></span>). Moreover, the map
	<div class='equation'>\[
		Y\times R\to R,\qquad (y,r)\mapsto\chi(y)(r)
	\]</div>
	is the $T$-transform (Definition <span class='ref' data-tag='definitionttransform'></span>). Since all operations are pointwise, each section $\chi(y)$ of the $T$-transform is an $R$-algebra automorphism of $R$ (Theorem <span class='ref' data-tag='propositionmodelmorphism'></span>), so it is necessarily the identity automorphism. This means that $Tf=f\circ\phi$ for all $f\in A_R(X)$.<span class='qed'></span>
	</p>
</div>

<p>
We now classify ideals with local units of the $R$-algebra $A_R(X)$, as in Theorem <span class='ref' data-tag='theoremperppideals'></span>. Using the same notation of <a href='../3.dcf/3.2.pi.html'>Section 3.2</a>, note that if $U$ is an open subset of $X$, then 
\[\mathbf{I}(U):=\left\{f\in A_R(X):\supp(f)\subseteq U\right\}\]
is an ideal of $A_R(X)$ with local units. Indeed, if $f_1, \cdots, f_n \in \mathbf{I}(U)$ then  the characteristic function $1_K$ of $K=\bigcup_{i=1}^n \supp(f_i)$ is a local unit for $\left\{f_1,\ldots,f_n\right\}$. Also note that $U$ is compact if and only if $\mathbf{I}(U)$ has a unit (namely, the characteristic function $1_U$ is its identity).
</p>

<!-- 4.4.36 -->
<div class='proposition' id='propideals'>
	<p><span class='envidentifier'>Proposition 4.4.36</span>
	Let $R$ be an indecomposable ring and $X$ a zero-dimensional, locally compact Hausdorff space. Then the map $U\mapsto \mathbf{I}(U)$ is an order isomorphism between the lattices of open subsets of $X$ and ideals with local units of $A_R(X)$. The inverse map is given by $I\mapsto \mathbf{U}(I):=\bigcup_{f\in I}\supp(f)$.
	</p>
</div>

<p>
<a class='proofbutton' data-tag='propideals'>Proof</a>
</p>

<div class='proof' id='proofofpropideals'>
	<p>
	We will prove that ideals with local units of $A_R(X)$ are precisely the $\perpp$-ideals (Definition <span class='ref' data-tag='definitionperppideal'></span>). By Theorem <span class='ref' data-tag='theoremperppideals'></span> and the discussion before this proposition, every $\perpp$-ideal of $A_R(X)$ is an ideal with local units of the $R$-algebra $A_R(X)$.
	</p>
	
	<p>
	Assume now that $I$ is an ideal with local units of $A_R(X)$. We need to prove that an element $a\in A_R(X)$ belongs to $I$ if and only if it admits a finite strong cover (Definition <span class='ref' data-tag='definitionstrongcover'></span>) by elements of $I$. On one hand, if $f\in I$ then $\left\{f\right\}$ is a finite strong cover of $f$ contained in $I$.
	</p>
	
	<p>
	Conversely, assume $f\in A_R(X)$ admits a finite strong cover $B\subseteq I$, so $\supp(f)\subseteq\bigcup_{b\in B}\supp(b)$ (Proposition <span class='ref' data-tag='propositiongoodformofstrongcover'></span>). Let $u\in I$ be a local unit for $B$. In particular $u$ is an idempotent, so $u=1_A$ for some compact-open subset $A\subseteq X$, and for all $b\in B$ and all $x\in\supp(b)$,
	<div class='equation'>\begin{align*}
		u(x)b(x)
			&=b(x)
			&\neq 0,
	\end{align*}</div>
	so $u(x)=1$. This proves that $u=1$ on $\bigcup_{b\in B}\supp(b)$, which contains $\supp(f)$, and thus $f=uf\in I$.
	</p>
	
	<p>
	Therefore, ideals with local units of the $R$-algebra $A_R(X)$ are the same as $\perpp$-ideals, so the result follows from Theorem <span class='ref' data-tag='theoremperppideals'></span>.<span class='qed'></span>
	</p>
</div>

<!-- 4.4.37 -->
<div class='proposition' id='propactionalphatheta'>
	<p><span class='envidentifier'>Proposition 4.4.37</span>
	Let $R$ be an indecomposable ring, $X$ a zero-dimensional, locally compact Hausdorff space and $S$ an inverse semigroup. If $\alpha=\left(\alpha_s:D_{s^*}\to D_s\right)_{s\in S}$ is an algebraic partial action of $S$ on the $R$-algebra $A_R(X)$, such that each ideal $D_s$ has local units, then there is a topological partial action $\theta=\left(\theta_s:X_{s^*}\to X_s\right)_{s\in S}$ of $S$ on $X$ which induces $\alpha$ (see Definition <span class='ref' data-tag='definitiondualpartialaction'></span>).
	</p>
</div>

<p>
<a class='proofbutton' data-tag='propactionalphatheta'>Proof</a>
</p>

<div class='proof' id='proofofpropactionalphatheta'>
	<p>
	The proof is similar to that of Theorem <span class='ref' data-tag='theoremperpppartialactions'></span>.
	</p>
	
	<p>
	Given $\alpha$ as above, for each $s\in S$ let $X_s=\mathbf{U}(D_s)$ be the open subset of $X$ associated to $D_s$. Under the usual identification of $D_s= \mathbf{I}(X_s)$ with $A_R(X_s)$, we see each map $\alpha_s$ as an $R$-algebra isomorphism
	<div class='equation'>\begin{align*}
		\alpha_s:
			& D_{s^*}\cong A_R(X_{s^*})\to A_R(X_s)\cong D_s.
	\end{align*}</div>
	</p>
	
	<p>
	By Proposition <span class='ref' data-tag='propisomorp'></span>, for each isomorphism $\alpha_s:A_R(X_{s^*})\to A_R(X_s)$, there is a unique homeomorphism $\theta_{s^*}: X_s \rightarrow X_{s^*}$ such that 
	<div class='equation'>\begin{align*}
	\alpha_s(f)
		&=f\circ\theta_{s^*}
	\end{align*}</div>
	for all $f\in A_R(X_{s^*})\cong D_{s^*}$. The homeomorphisms $\theta_s$ satisfy properties (1)-(3) of Theorem <span class='ref' data-tag='theoremperpppartialactions'></span>, so $\theta:s\mapsto \theta_s$ is a partial action of $S$ on $X$ which induces $\alpha$.<span class='qed'></span>
	</p>
</div>

<p>
So from an algebraic partial action $\alpha$ on $A_R(X)$ we managed to obtain an appropriate topological partial action $\theta$ on $X$. In order to identify the crossed product algebra of $\alpha$ with the Steinberg algebra of the groupoid of germs of $\theta$, we need to guarantee that the conditions of Theorem <span class='ref' data-tag='theoremsteinbergiscrossed'></span> are satisfied.
</p>

<p>
First we describe the ideals associated with clopen sets algebraically. The following definition is an algebraic version of [<span class='ref' data-tag='MR2391387'></span>, Definition 1.5.9].
</p>

<!-- 4.4.38 -->
<div class='definition'>
	<p><span class='envidentifier'>Definition 4.4.38</span>
	A <em>conditional expectation</em> of an $R$-algebra $A$ onto a subalgebra $B$ is an $R$-module map $E:A\to B$ such that
	<ol class='roman'>
		<li>
			$E(b)=b$ for all $b\in B$ (i.e., $E$ is a <em>projection</em> onto $B$);
		</li>
		
		<li>
			For all $a\in A$ and $b\in B$, $E(ba)=bE(a)$ and $E(ab)=E(a)b$ (i.e., $E$ is a $B$-bimodule morphism).
		</li>
	</ol>
	</p>
</div>

<div class='remark'>
	<p>
	If $B$ has local units then condition (ii) above can be substituted by
	<style>
		ol.roman.primetwo > li:before {
		  content: "(ii)\0027";
		}
	</style>
	<ol class='roman primetwo'>
		<li>
			For all $a\in A$ and $b,b'\in B$, $E(bab')=bE(a)b'$.
		</li>
	</ol>
	Indeed, if $a\in A$ and $b\in B$, let $u\in B$ be a unit for $\left\{E(ab),b,E(a)\right\}$. Then
	<div class='equation'>\begin{align*}
		E(ab)
			&=uE(ab)u\\
			&\overset{(ii)'}{=}E(uabu)\\
			&=E(uab)\\
			&=uE(a)b\\
			&=E(a)b,
	\end{align*}</div>
	and similarly $E(ba)=bE(a)$, so (ii) is satisfied.
	</p>
</div>

<!-- 4.4.39 -->
<div class='example'>
	<p><span class='envidentifier'>Example 4.4.39</span>
	Let $R$ be any (nontrivial) commutative unital ring. We consider the subalgebras $B\subseteq A$ of the $2\times 2$ matrix algebra $M_2(R)$ given by
	<div class='equation'>\begin{align*}
	A=
		&\left\{
			\begin{bmatrix}
			a	&0\\
			b	&c
			\end{bmatrix}
			:a,b,c\in R\right\}
	\end{align*}</div>
	and
	<div class='equation'>\begin{align*}
		B
			&=\left\{\begin{bmatrix}0&0\\a&0\end{bmatrix}:a\in R\right\}.
	\end{align*}</div>
	Let $E:A\to B$ be given by
	<div class='equation'>\begin{align*}
		E\left(
			\begin{bmatrix}
			a	&0\\
			b	&c
			\end{bmatrix}
			\right)
			&=
				\begin{bmatrix}
				0&0\\
				b&0
				\end{bmatrix}.
	\end{align*}</div>
	Then $E$ is a projection of $A$ onto $B$ and satisfies (ii)', because $BAB=0$. However, $E$ is not a left (nor right) $B$-module morphism, because
	<div class='equation'>\begin{align*}
		\begin{bmatrix}
			0&0\\
			1&0
		\end{bmatrix}
			E\left(
			\begin{bmatrix}
				1&0\\
				0&0
			\end{bmatrix}
			\right)=0,
	\end{align*}</div>
	which is different from
	<div class='equation'>\begin{align*}
		E\left(
			\begin{bmatrix}
			0&0\\
			1&0
			\end{bmatrix}
			\begin{bmatrix}
			1&0\\
			0&0
			\end{bmatrix}
			\right)
				&=\begin{bmatrix}
				0&0\\
				1&0
				\end{bmatrix}.
	\end{align*}</div>
	</p>
</div>

<!-- 4.4.40 -->
<div class='lemma' id='lemmaidealsofclopens'>
	<p><span class='envidentifier'>Lemma 4.4.40</span>
	Let $R$ be an indecomposable ring, $X$ a zero-dimensional, locally compact Hausdorff space and $U$ an open subset of $X$. Then the following are equivalent:
	<ol class='arpar'>
		<li>
			$U$ is clopen.
		</li>
		
		<li>
			There exists a conditional expectation of $A_R(X)$ onto $\mathbf{I}(U)$.
		</li>
		
		<li>
			There exists an ideal $J$ of $A_R(X)$ such that $A_R(X)=\mathbf{I}(U)\oplus J$ as $R$-modules.
		</li>
	</ol>
	</p>
</div>

<p>
<a class='proofbutton' data-tag='lemmaidealsofclopens'>Proof</a>
</p>

<div class='proof' id='proofoflemmaidealsofclopens'>
	<ul>
		<li><p><u>(1)$\Rightarrow$(2)</u>:</p>
			<p>
			If $U$ is clopen, then $1_U$ is continuous and the map $E:A_R(X)\to\mathbf{I}(U)$, $E(f)=f1_U$ is a conditional expectation. (Note that $E$ is well-defined even though $1_U$ does not belong to $\mathbf{I}(U)$ if $U$ is not compact.)
			</p>
		</li>
		
		<li><p><u>(2)$\Rightarrow$(3)</u>:</p>
			<p>
			Suppose that $E:A_R(X)\to\mathbf{I}(U)$ is a conditional expectation, and define $J=\left\{f-E(f):f\in A_R(X)\right\}$. Then $J$ is an $R$-submodule of $A_R(X)$ such that $A_R(X)=\mathbf{I}(U)\oplus J$, since $E$ is a projection onto $\mathbf{I}(U)$. Let us check that $J$ is a right ideal. Given $f,g\in A_R(X)$, let $u\in\mathbf{I}(U)$ be a local unit for $\left\{E(fg),E(f)g\right\}$. Since $E$ is a right $\mathbf{I}(U)$-morphism and $\mathbf{I}(U)$ is an ideal, we have
			<div class='equation' id='equationconditionalexpectationismorphism'>\begin{align*}
				E(fg)
					&=E(fg)u\\
					&=E(fgu)\\
					&=E(f)gu\\
					&=E(f)g,\tag{4.4.8}
			\end{align*}</div>
			so
			<div class='equation'>\begin{align*}
				(f-E(f))g
					&=fg-E(f)g\\
					&=fg-E(fg)\\
					&\in J,
			\end{align*}</div>
			and therefore $J$ is a right ideal. Similarly, $J$ is a left ideal.
			</p>
		</li>
		
		<li><p><u>(3)$\Rightarrow$(1)</u>:</p>
			<p>
			Suppose that $A_R(X)=\mathbf{I}(U)\oplus J$ for some ideal $J$. Let us show that $J\subseteq\mathbf{I}(X\setminus\overline{U})$. Indeed, if $f\in J$ and $x\in\overline{U}$, then $f$ is constant on a neighbourhood $V$ of $x$. Choose $y\in U\cap V$, and $W$ a compact-open neighbourhood satisfying $y\in W\subseteq U\cap V$. Since $\mathbf{I}(U)$ and $J$ are complementary ideals, then $f1_W=0$ and in particular
			<div class='equation'>\begin{align*}
				f(x)
					&=f(y)\\
					&=(f1_W)(y)\\
					&=0.
			\end{align*}</div>
			</p>
			
			<p>
			Therefore $J\subseteq\mathbf{I}(X\setminus\overline{U})$. We can now prove that $U$ is clopen.
			</p>
			
			<p>
			Given $x\in\overline{U}$, let $V$ be any compact-open neighbourhood of $x$. By hypothesis, we may write $1_V=f+g$ for some $f\in\mathbf{I}(U)$ and $g\in J\subseteq\mathbf{I}(X\setminus\overline{U})$, so $1=1_V(x)=f(x)+g(x)=f(x)$. In particular $x\in\supp(f)\subseteq U$. Therefore $U$ is clopen.<span class='qed'></span>
			</p>
		</li>
	</ul>
</div>

<div class='remark'>
	<p><span class='envidentifier'>Remark</span>
	The same argument as used in Equation (<span class='ref' data-tag='equationconditionalexpectationismorphism'></span>) can be used to show that every conditional expectation $E:A\to I$ of an $R$-algebra $A$ onto an ideal $I$ with local units is actually an $R$-algebra morphism.
	</p>
</div>

<p>
By Lemma <span class='ref' data-tag='lemmaidealsofclopens'></span> and Theorems <span class='ref' data-tag='propweaksemilattice'></span> and <span class='ref' data-tag='theoremsteinbergiscrossed'></span>, we conclude the following:
</p>

<!-- 4.4.41 -->
<div class='theorem' id='theoremcrossedproductasasteinbergalgebra'>
	<p><span class='envidentifier'>Theorem 4.4.41</span>
	Let $S$ be an inverse semigroup which is a weak semilattice, $R$ be an indecomposable ring and $X$ a zero-dimensional, locally compact Hausdorff space. Let $\alpha=\left(\alpha_s:D_{s^*}\to D_s\right)_{s\in S}$ be an algebraic partial action of $S$ on $A_R(X)$ where each ideal $D_s$ has local units and satisfies any condition of Lemma <span class='ref' data-tag='lemmaidealsofclopens'></span>.
	</p>
	
	<p>
	Then  $A_R(X)\ltimes_{\alpha} X$ is isomorphic to a Steinberg algebra $A_R(S\ltimes_{\theta} X)$ where $\theta$ is a topological partial action of $S$ on $X$ which induces $\alpha$.
	</p>
</div>

</div>

</body>

<script>
$('.ref').each( function(){
	$(this).load('../references/' + $(this).data('tag') + ' .reflink');
});
</script>
<script>
$('.ref').hover(function(){
	$('#closerightbar').show();
	$('#rightbar').load('../references/' + $(this).data('tag') + ' .toload', function () {
		MathJax.Hub.Queue(["Typeset", MathJax.Hub, "rightbar"]);
		
		$('#rightbar .ref').each( function(){
			$(this).load('../references/' + $(this).data('tag') + ' .reflink');
			});
		});
	},function(){}); // added empty function for when mouse gets out to avoid reloading mathjax
	// this does just creates links inside the right bar. Does not set the hover function for them
</script>

<script>
$('.proofbutton').each(function() {
  var target = $(this).data('tag');
  $(this).attr('href', 'javascript:void(0)');
  $(this).click(function() {
      $('#proofof' + target).toggle();
  });
});
</script>

<script>
function closerightbar(){
	$('#closerightbar').hide();
	$('#rightbar').empty();
}
</script>

</html>